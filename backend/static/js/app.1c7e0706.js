(function(){"use strict";var e={3173:function(e,a,o){var t=o(4373);const l=t.A.create({baseURL:"https://leadmass.up.railway.app/"});a.A=l},2821:function(e,a,o){var t=o(5130),l=o(6768);const n={id:"app"};function r(e,a,o,t,r,s){const i=(0,l.g2)("router-view");return(0,l.uX)(),(0,l.CE)("div",n,[(0,l.bF)(i)])}var s={name:"App"},i=o(1241);const d=(0,i.A)(s,[["render",r],["__scopeId","data-v-e45c7ca4"]]);var c=d,u=o(1387),m=o(4232);const h={id:"login"},p={class:"login-container"},v={class:"mb-3"},L={class:"mb-3 position-relative"},b=["type"],k={key:0,class:"text-danger text-center mt-3"};function f(e,a,o,n,r,s){return(0,l.uX)(),(0,l.CE)("div",h,[a[9]||(a[9]=(0,l.Lk)("div",{class:"header-image"},[(0,l.Lk)("img",{src:"/images/cabezote.jpg",alt:"Cabezote",class:"img-fluid w-100"})],-1)),(0,l.Lk)("div",p,[a[5]||(a[5]=(0,l.Lk)("h1",{class:"text-center"},"LeadsMass Retail",-1)),a[6]||(a[6]=(0,l.Lk)("h3",{class:"text-center"},"Sistema de Manejo de Leads",-1)),a[7]||(a[7]=(0,l.Lk)("h3",{class:"text-center mb-4"},null,-1)),(0,l.Lk)("form",{onSubmit:a[3]||(a[3]=(0,t.D$)(((...e)=>s.login&&s.login(...e)),["prevent"]))},[(0,l.Lk)("div",v,[(0,l.bo)((0,l.Lk)("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=e=>r.usuario=e),class:"form-control",placeholder:"Usuario",required:""},null,512),[[t.Jo,r.usuario]])]),(0,l.Lk)("div",L,[(0,l.bo)((0,l.Lk)("input",{type:r.mostrarPassword?"text":"password","onUpdate:modelValue":a[1]||(a[1]=e=>r.password=e),class:"form-control pe-5",placeholder:"Contraseña",required:""},null,8,b),[[t.hp,r.password]]),(0,l.Lk)("span",{class:"toggle-password",onClick:a[2]||(a[2]=e=>r.mostrarPassword=!r.mostrarPassword)},[(0,l.Lk)("i",{class:(0,m.C4)(r.mostrarPassword?"bi bi-eye-slash":"bi bi-eye")},null,2)])]),a[4]||(a[4]=(0,l.Lk)("button",{type:"submit",class:"btn btn-secondary w-100"},"Ingresar",-1))],32),r.errorMessage?((0,l.uX)(),(0,l.CE)("p",k,(0,m.v_)(r.errorMessage),1)):(0,l.Q3)("",!0),a[8]||(a[8]=(0,l.Lk)("p",{class:"text-center mt-4 text-muted small"}," © 2025 Binaria Media Group SAS. ",-1))])])}o(4114);var g=o(3173),C={data(){return{usuario:"",password:"",errorMessage:"",mostrarPassword:!1}},methods:{async login(){if(this.usuario&&this.password)try{const e=await g.A.post("/login",{usuario:this.usuario,password:this.password}),{tipo_usuario:a,vendedor_id:o,id:t,nombres:l,apellidos:n,message:r}=e.data;this.errorMessage="",alert(r),localStorage.setItem("tipo_usuario",a),localStorage.setItem("vendedor_nombre_completo",`${l} ${n}`),t&&localStorage.setItem("id_usuario",t),"vendedor"===a&&o?(localStorage.setItem("vendedor_actual",o),this.$router.push({name:"VendedorLeads"})):"supervisor"===a||"gerente"===a?(localStorage.removeItem("vendedor_actual"),this.$router.push({name:"GerenteLeads"})):"administrador"===a?(localStorage.removeItem("vendedor_actual"),this.$router.push({name:"AdminLeads"})):"expert"===a?this.$router.push({name:"ExpertDashboard"}):this.errorMessage="Tipo de usuario no reconocido. Por favor, contacta al administrador."}catch(e){console.error("Error en el inicio de sesión:",e),this.errorMessage="Credenciales incorrectas. Por favor, intenta de nuevo."}else this.errorMessage="Por favor, completa ambos campos."}}};const E=(0,i.A)(C,[["render",f],["__scopeId","data-v-564577a8"]]);var _=E;const y={id:"parametrizacion",class:"container mt-5"},x={class:"card mb-4 shadow-sm"},A={class:"card-body"},V={class:"mb-3"},S={class:"mb-3"},I={class:"mb-3"},N={class:"row"},F={class:"form-check"},T=["value"],w={class:"form-check-label"},D={key:0},R={class:"card mb-4 shadow-sm"},X={class:"card-body"},U={class:"card-title"},O={class:"list-unstyled"},M={class:"d-flex justify-content-between mt-4"},P=["disabled"],z=["disabled"],G={key:0,class:"mt-3"},W={class:"mb-3"},j={class:"mb-3"},J={class:"mb-3"},$=["value"],H={class:"form-check-label"};function K(e,a,o,n,r,s){const i=(0,l.g2)("BotonesGlobales");return(0,l.uX)(),(0,l.CE)("div",y,[a[24]||(a[24]=(0,l.Lk)("h1",{class:"text-center mb-4"},"Parametrización de Concesionarios",-1)),(0,l.Lk)("div",x,[(0,l.Lk)("div",A,[a[16]||(a[16]=(0,l.Lk)("h3",{class:"card-title text-center"},"Agregar Nuevo Concesionario",-1)),(0,l.Lk)("form",{onSubmit:a[3]||(a[3]=(0,t.D$)(((...e)=>s.agregarConcesionario&&s.agregarConcesionario(...e)),["prevent"]))},[(0,l.Lk)("div",V,[a[12]||(a[12]=(0,l.Lk)("label",{for:"nombre_concesionario",class:"form-label"},"Nombre Concesionario:",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=e=>r.nuevoConcesionario.nombre_concesionario=e),class:"form-control",required:""},null,512),[[t.Jo,r.nuevoConcesionario.nombre_concesionario]])]),(0,l.Lk)("div",S,[a[13]||(a[13]=(0,l.Lk)("label",{for:"ciudad",class:"form-label"},"Ciudad:",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text","onUpdate:modelValue":a[1]||(a[1]=e=>r.nuevoConcesionario.ciudad=e),class:"form-control",required:""},null,512),[[t.Jo,r.nuevoConcesionario.ciudad]])]),(0,l.Lk)("div",I,[a[14]||(a[14]=(0,l.Lk)("label",null,"Marcas:",-1)),(0,l.Lk)("div",N,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(r.marcasDisponibles,(e=>((0,l.uX)(),(0,l.CE)("div",{class:"col-md-2",key:e},[(0,l.Lk)("div",F,[(0,l.bo)((0,l.Lk)("input",{type:"checkbox",value:e,"onUpdate:modelValue":a[2]||(a[2]=e=>r.nuevoConcesionario.marcas=e),class:"form-check-input"},null,8,T),[[t.lH,r.nuevoConcesionario.marcas]]),(0,l.Lk)("label",w,(0,m.v_)(e),1)])])))),128))])]),a[15]||(a[15]=(0,l.Lk)("button",{type:"submit",class:"btn btn-primary w-100"},"Agregar Concesionario",-1))],32)])]),a[25]||(a[25]=(0,l.Lk)("h2",{class:"text-center mb-4"},"Concesionarios Existentes",-1)),r.concesionarios.length?((0,l.uX)(),(0,l.CE)("div",D,[(0,l.Lk)("div",R,[(0,l.Lk)("div",X,[(0,l.Lk)("h3",U,(0,m.v_)(s.concesionarioActual.nombre_concesionario),1),(0,l.Lk)("p",null,[a[17]||(a[17]=(0,l.Lk)("strong",null,"Ciudad:",-1)),(0,l.eW)(" "+(0,m.v_)(s.concesionarioActual.ciudad),1)]),a[23]||(a[23]=(0,l.Lk)("p",null,[(0,l.Lk)("strong",null,"Marcas Manejadas:")],-1)),(0,l.Lk)("ul",O,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(s.concesionarioActual.marcas,(e=>((0,l.uX)(),(0,l.CE)("li",{key:e},(0,m.v_)(e),1)))),128))]),(0,l.Lk)("div",M,[(0,l.Lk)("button",{class:"btn btn-outline-secondary",onClick:a[4]||(a[4]=(...e)=>s.concesionarioAnterior&&s.concesionarioAnterior(...e)),disabled:0===r.currentIndex},"← Anterior",8,P),(0,l.Lk)("button",{class:"btn btn-outline-secondary",onClick:a[5]||(a[5]=(...e)=>s.concesionarioSiguiente&&s.concesionarioSiguiente(...e)),disabled:r.currentIndex===r.concesionarios.length-1},"Siguiente →",8,z)]),(0,l.Lk)("button",{class:"btn btn-info w-100 mt-3",onClick:a[6]||(a[6]=(...e)=>s.habilitarEdicion&&s.habilitarEdicion(...e))},"Editar Concesionario"),r.editMode?((0,l.uX)(),(0,l.CE)("div",G,[a[22]||(a[22]=(0,l.Lk)("h4",null,"Editar Concesionario",-1)),(0,l.Lk)("form",{onSubmit:a[10]||(a[10]=(0,t.D$)(((...e)=>s.guardarCambios&&s.guardarCambios(...e)),["prevent"]))},[(0,l.Lk)("div",W,[a[18]||(a[18]=(0,l.Lk)("label",{for:"nombre_concesionario",class:"form-label"},"Nombre Concesionario:",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text","onUpdate:modelValue":a[7]||(a[7]=e=>s.concesionarioActual.nombre_concesionario=e),class:"form-control"},null,512),[[t.Jo,s.concesionarioActual.nombre_concesionario]])]),(0,l.Lk)("div",j,[a[19]||(a[19]=(0,l.Lk)("label",{for:"ciudad",class:"form-label"},"Ciudad:",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text","onUpdate:modelValue":a[8]||(a[8]=e=>s.concesionarioActual.ciudad=e),class:"form-control"},null,512),[[t.Jo,s.concesionarioActual.ciudad]])]),(0,l.Lk)("div",J,[a[20]||(a[20]=(0,l.Lk)("label",null,"Marcas:",-1)),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(r.marcasDisponibles,(e=>((0,l.uX)(),(0,l.CE)("div",{class:"form-check",key:e},[(0,l.bo)((0,l.Lk)("input",{type:"checkbox",value:e,"onUpdate:modelValue":a[9]||(a[9]=e=>s.concesionarioActual.marcas=e),class:"form-check-input"},null,8,$),[[t.lH,s.concesionarioActual.marcas]]),(0,l.Lk)("label",H,(0,m.v_)(e),1)])))),128))]),a[21]||(a[21]=(0,l.Lk)("button",{type:"submit",class:"btn btn-success w-100"},"Guardar Cambios",-1))],32)])):(0,l.Q3)("",!0),(0,l.Lk)("button",{class:"btn btn-danger w-100 mt-3",onClick:a[11]||(a[11]=(...e)=>s.eliminarConcesionario&&s.eliminarConcesionario(...e))},"Eliminar Concesionario")])])])):(0,l.Q3)("",!0),(0,l.bF)(i)])}var q=o(6743),B={data(){return{concesionarios:[],nuevoConcesionario:{nombre_concesionario:"",ciudad:"",marcas:[]},marcasDisponibles:["Mercedez-benz","Range Rover","Defender","Discovery","Jaguar","DFSK","Seres","Subaru","Citroen","DS Automóviles","Suzuki","Develon","Dieci","Hino","Mack","Hangcha","Komatsu","Linde","Still","XCMG","JAC","Great Wall","KGM"],currentIndex:0,editMode:!1}},computed:{concesionarioActual(){return this.concesionarios[this.currentIndex]}},methods:{obtenerConcesionarios(){g.A.get("/get-concesionarios").then((e=>{this.concesionarios=e.data})).catch((e=>{console.error("Error al obtener concesionarios:",e)}))},agregarConcesionario(){g.A.post("/add-concesionario",this.nuevoConcesionario).then((()=>{alert("Concesionario agregado exitosamente"),this.obtenerConcesionarios()})).catch((e=>{console.error("Error al agregar concesionario:",e)}))},concesionarioAnterior(){this.currentIndex>0&&this.currentIndex--},concesionarioSiguiente(){this.currentIndex<this.concesionarios.length-1&&this.currentIndex++},habilitarEdicion(){this.editMode=!0},guardarCambios(){g.A.post("/update-concesionario",this.concesionarioActual).then((()=>{alert("Concesionario actualizado exitosamente"),this.editMode=!1,this.obtenerConcesionarios()})).catch((e=>{console.error("Error al actualizar concesionario:",e)}))},eliminarConcesionario(){confirm("¿Estás seguro de eliminar este concesionario?")&&g.A.post("/delete-concesionario",{id:this.concesionarioActual.id}).then((()=>{alert("Concesionario eliminado exitosamente"),this.obtenerConcesionarios()})).catch((e=>{console.error("Error al eliminar concesionario:",e)}))}},mounted(){this.obtenerConcesionarios()},components:{BotonesGlobales:q.A}};const Q=(0,i.A)(B,[["render",K],["__scopeId","data-v-9932ae5c"]]);var Y=Q;const Z={id:"supervisor-leads",class:"container mt-4"},ee={class:"text-center mb-4"},ae={class:"chart-container mb-4 d-flex justify-content-center"},oe={class:"controls d-flex justify-content-between align-items-center mb-4"},te={class:"totalizadores"},le={class:"navigation-buttons text-center mt-4"},ne={key:0,class:"filtros mb-4 row g-3"},re={class:"col-md-4"},se=["value"],ie={class:"col-md-4"},de={class:"col-md-4"},ce={key:1,class:"table-responsive"},ue={class:"table table-bordered table-striped"},me={class:"table-dark"},he=["onMousedown"],pe=["value","onInput"],ve=["value","onInput"],Le=["value","onInput"],be=["value","onInput"],ke=["value","onInput"],fe=["value","onInput"],ge=["value","onInput"],Ce=["value","onInput"],Ee=["value","onInput"],_e=["value","onInput"],ye=["value","onInput"],xe=["value","onChange"],Ae=["value","onChange"],Ve=["value","onInput"],Se=["onClick"],Ie=["onClick"];function Ne(e,a,o,n,r,s){const i=(0,l.g2)("v-chart"),d=(0,l.g2)("BotonesGlobales");return(0,l.uX)(),(0,l.CE)("div",Z,[a[23]||(a[23]=(0,l.Lk)("h1",{class:"text-center mb-4"},"Gestión y Eliminación de Leads",-1)),(0,l.Lk)("div",ee,[(0,l.Lk)("button",{class:"btn btn-secondary",onClick:a[0]||(a[0]=(...e)=>s.generarContenidoTabla&&s.generarContenidoTabla(...e))},"Generar Contenido Tabla")]),(0,l.Lk)("div",ae,[(0,l.bF)(i,{option:r.chartOptions,style:{width:"60%",height:"300px"}},null,8,["option"])]),(0,l.Lk)("div",oe,[(0,l.Lk)("div",te,[(0,l.Lk)("p",null,[a[7]||(a[7]=(0,l.eW)("Total leads en sistema: ")),(0,l.Lk)("strong",null,(0,m.v_)(r.totalLeadsAsignados),1)]),(0,l.Lk)("p",null,[a[8]||(a[8]=(0,l.eW)("Total leads Nuevos: ")),(0,l.Lk)("strong",null,(0,m.v_)(r.totalLeadsNuevos),1)]),(0,l.Lk)("p",null,[a[9]||(a[9]=(0,l.eW)("Total leads en seguimiento: ")),(0,l.Lk)("strong",null,(0,m.v_)(r.totalLeadsEnSeguimiento),1)]),(0,l.Lk)("p",null,[a[10]||(a[10]=(0,l.eW)("Total leads cerrados: ")),(0,l.Lk)("strong",null,(0,m.v_)(r.totalLeadsCerrados),1)]),(0,l.Lk)("p",null,[a[11]||(a[11]=(0,l.eW)("Total leads culminados en venta: ")),(0,l.Lk)("strong",null,(0,m.v_)(r.totalLeadsCulminadosEnVenta),1)]),(0,l.Lk)("p",null,[a[12]||(a[12]=(0,l.eW)("Total leads asignados: ")),(0,l.Lk)("strong",null,(0,m.v_)(r.totalLeadsAsignadosEstado),1)]),(0,l.Lk)("p",null,[a[13]||(a[13]=(0,l.eW)("Última conexión del vendedor: ")),(0,l.Lk)("strong",null,(0,m.v_)(r.tiempoUltimaConexion),1)]),(0,l.Lk)("p",null,[a[14]||(a[14]=(0,l.eW)("Última puesta en línea: ")),(0,l.Lk)("strong",null,(0,m.v_)(r.ultimaPuestaOnline),1)])])]),(0,l.Lk)("div",le,[(0,l.bF)(d)]),r.contenidoGenerado?((0,l.uX)(),(0,l.CE)("div",ne,[(0,l.Lk)("div",re,[a[16]||(a[16]=(0,l.Lk)("label",{class:"form-label"},"Filtrar por vendedor:",-1)),(0,l.bo)((0,l.Lk)("select",{class:"form-select","onUpdate:modelValue":a[1]||(a[1]=e=>r.filtroVendedor=e),onChange:a[2]||(a[2]=(...e)=>s.filtrarLeads&&s.filtrarLeads(...e))},[a[15]||(a[15]=(0,l.Lk)("option",{value:""},"Todos",-1)),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(r.vendedores,(e=>((0,l.uX)(),(0,l.CE)("option",{key:e.id,value:e.id},(0,m.v_)(e.nombre),9,se)))),128))],544),[[t.u1,r.filtroVendedor]])]),(0,l.Lk)("div",ie,[a[18]||(a[18]=(0,l.Lk)("label",{class:"form-label"},"Filtrar por estado:",-1)),(0,l.bo)((0,l.Lk)("select",{class:"form-select","onUpdate:modelValue":a[3]||(a[3]=e=>r.filtroEstado=e),onChange:a[4]||(a[4]=(...e)=>s.filtrarLeads&&s.filtrarLeads(...e))},a[17]||(a[17]=[(0,l.Fv)('<option value="" data-v-51e71653>Todos</option><option value="nuevo" data-v-51e71653>Nuevo</option><option value="asignado" data-v-51e71653>Asignado</option><option value="en seguimiento" data-v-51e71653>En Seguimiento</option><option value="cerrado" data-v-51e71653>Cerrado</option><option value="culmina en venta" data-v-51e71653>Culmina en Venta</option>',6)]),544),[[t.u1,r.filtroEstado]])]),(0,l.Lk)("div",de,[a[20]||(a[20]=(0,l.Lk)("label",{class:"form-label"},"Filtrar por Test Drive:",-1)),(0,l.bo)((0,l.Lk)("select",{class:"form-select","onUpdate:modelValue":a[5]||(a[5]=e=>r.filtroTestDrive=e),onChange:a[6]||(a[6]=(...e)=>s.filtrarLeads&&s.filtrarLeads(...e))},a[19]||(a[19]=[(0,l.Lk)("option",{value:""},"Todos",-1),(0,l.Lk)("option",{value:"Si"},"Si",-1),(0,l.Lk)("option",{value:"No"},"No",-1)]),544),[[t.u1,r.filtroTestDrive]])])])):(0,l.Q3)("",!0),r.contenidoGenerado?((0,l.uX)(),(0,l.CE)("div",ce,[(0,l.Lk)("table",ue,[(0,l.Lk)("thead",me,[(0,l.Lk)("tr",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(r.headers,(e=>((0,l.uX)(),(0,l.CE)("th",{key:e,style:(0,m.Tr)({width:r.columnWidths[e]})},[(0,l.Lk)("div",{class:"resizable-header",onMousedown:a=>s.startResize(a,e)},(0,m.v_)(e),41,he)],4)))),128))])]),(0,l.Lk)("tbody",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(r.leadsFiltrados,(e=>((0,l.uX)(),(0,l.CE)("tr",{key:e.id},[(0,l.Lk)("td",null,[(0,l.Lk)("input",{value:s.getLeadValue(e,"nombres"),onInput:a=>s.setLeadValue(e,"nombres",a.target.value),class:"form-control"},null,40,pe)]),(0,l.Lk)("td",null,[(0,l.Lk)("input",{value:s.getLeadValue(e,"apellidos"),onInput:a=>s.setLeadValue(e,"apellidos",a.target.value),class:"form-control"},null,40,ve)]),(0,l.Lk)("td",null,[(0,l.Lk)("input",{value:s.getLeadValue(e,"identificacion"),onInput:a=>s.setLeadValue(e,"identificacion",a.target.value),class:"form-control"},null,40,Le)]),(0,l.Lk)("td",null,[(0,l.Lk)("input",{value:s.getLeadValue(e,"telefono"),onInput:a=>s.setLeadValue(e,"telefono",a.target.value),class:"form-control"},null,40,be)]),(0,l.Lk)("td",null,[(0,l.Lk)("input",{value:s.getLeadValue(e,"direccion"),onInput:a=>s.setLeadValue(e,"direccion",a.target.value),class:"form-control"},null,40,ke)]),(0,l.Lk)("td",null,[(0,l.Lk)("input",{value:s.getLeadValue(e,"ciudad"),onInput:a=>s.setLeadValue(e,"ciudad",a.target.value),class:"form-control"},null,40,fe)]),(0,l.Lk)("td",null,[(0,l.Lk)("input",{value:s.getLeadValue(e,"correo"),onInput:a=>s.setLeadValue(e,"correo",a.target.value),class:"form-control"},null,40,ge)]),(0,l.Lk)("td",null,[(0,l.Lk)("input",{value:s.getLeadValue(e,"fecha_lead"),onInput:a=>s.setLeadValue(e,"fecha_lead",a.target.value),class:"form-control"},null,40,Ce)]),(0,l.Lk)("td",null,[(0,l.Lk)("input",{value:s.getLeadValue(e,"origen_lead"),onInput:a=>s.setLeadValue(e,"origen_lead",a.target.value),class:"form-control"},null,40,Ee)]),(0,l.Lk)("td",null,[(0,l.Lk)("input",{value:s.getLeadValue(e,"marca_interes"),onInput:a=>s.setLeadValue(e,"marca_interes",a.target.value),class:"form-control"},null,40,_e)]),(0,l.Lk)("td",null,[(0,l.Lk)("input",{value:s.getLeadValue(e,"modelo_interesado"),onInput:a=>s.setLeadValue(e,"modelo_interesado",a.target.value),class:"form-control"},null,40,ye)]),(0,l.Lk)("td",null,[(0,l.Lk)("select",{value:s.getLeadValue(e,"estatus"),onChange:a=>s.setLeadValue(e,"estatus",a.target.value),class:"form-select"},a[21]||(a[21]=[(0,l.Fv)('<option value="nuevo" data-v-51e71653>Nuevo</option><option value="asignado" data-v-51e71653>Asignado</option><option value="en seguimiento" data-v-51e71653>En Seguimiento</option><option value="cerrado" data-v-51e71653>Cerrado</option><option value="culmina en venta" data-v-51e71653>Culmina en Venta</option>',5)]),40,xe)]),(0,l.Lk)("td",null,[(0,l.Lk)("select",{value:s.getLeadValue(e,"test_drive"),onChange:a=>s.setLeadValue(e,"test_drive",a.target.value),class:"form-select"},a[22]||(a[22]=[(0,l.Lk)("option",{value:"No"},"No",-1),(0,l.Lk)("option",{value:"Si"},"Si",-1)]),40,Ae)]),(0,l.Lk)("td",null,[(0,l.Lk)("textarea",{value:s.getLeadValue(e,"seguimientos"),onInput:a=>s.setLeadValue(e,"seguimientos",a.target.value),class:"form-control seguimiento-textarea"},null,40,Ve)]),(0,l.Lk)("td",null,[(0,l.Lk)("button",{class:"btn btn-primary me-2",onClick:a=>s.guardarLead(e)},"Guardar",8,Se),(0,l.Lk)("button",{class:"btn btn-danger",onClick:a=>s.eliminarLead(e.id)},"Eliminar",8,Ie)])])))),128))])])])):(0,l.Q3)("",!0)])}o(8992),o(4520);var Fe=o(7780),Te=o(2212),we=o(3704),De=o(623),Re=o(9536),Xe=o(5143),Ue=o(5095);(0,Te.Y)([De.a,Re.a,Xe.a,we.a,Ue.a]);var Oe={components:{VChart:Fe.Ay,BotonesGlobales:q.A},data(){return{headers:["Nombres","Apellidos","Identificación","Teléfono","Dirección","Ciudad","Correo","Fecha Lead","Origen Lead","Marca de Interés","Modelo Interesado","Estatus","Test Drive","Seguimientos","Acciones"],leads:[],leadsFiltrados:[],filtroVendedor:"",filtroEstado:"",filtroTestDrive:"",vendedores:[],totalLeadsAsignados:0,totalLeadsNuevos:0,totalLeadsEnSeguimiento:0,totalLeadsCerrados:0,totalLeadsCulminadosEnVenta:0,totalLeadsAsignadosEstado:0,tiempoUltimaConexion:"",ultimaPuestaOnline:"",contenidoGenerado:!1,resizingColumn:null,initialX:0,initialWidth:0,columnWidths:{},chartOptions:{tooltip:{trigger:"item"},legend:{top:"bottom"},series:[{type:"funnel",left:"10%",width:"80%",sort:"descending",label:{show:!0,position:"inside"},data:[]}]}}},methods:{getLeadValue(e,a){return e&&e[a]?e[a]:""},setLeadValue(e,a,o){e&&(e[a]=o)},generarContenidoTabla(){this.cargarLeads(),this.contenidoGenerado=!0},cargarLeads(){g.A.get("/get-all-leads").then((e=>{this.leads=e.data,this.filtrarLeads()})).catch((e=>{console.error("Error al cargar leads:",e)}))},cargarVendedores(){g.A.get("/get-vendedores").then((e=>{this.vendedores=e.data})).catch((e=>{console.error("Error al cargar vendedores:",e)}))},filtrarLeads(){this.leadsFiltrados=this.leads.filter((e=>(!this.filtroVendedor||e.asignado_a===parseInt(this.filtroVendedor))&&(!this.filtroEstado||e.estatus===this.filtroEstado)&&(!this.filtroTestDrive||e.test_drive===this.filtroTestDrive))),this.calcularTotalizadores()},calcularTotalizadores(){this.totalLeadsAsignados=this.leadsFiltrados.length,this.totalLeadsNuevos=this.leadsFiltrados.filter((e=>"nuevo"===e.estatus)).length,this.totalLeadsEnSeguimiento=this.leadsFiltrados.filter((e=>"en seguimiento"===e.estatus)).length,this.totalLeadsCerrados=this.leadsFiltrados.filter((e=>"cerrado"===e.estatus)).length,this.totalLeadsCulminadosEnVenta=this.leadsFiltrados.filter((e=>"culmina en venta"===e.estatus)).length,this.totalLeadsAsignadosEstado=this.leadsFiltrados.filter((e=>"asignado"===e.estatus)).length,this.updateChartData(),this.filtroVendedor?g.A.get(`/tiempo-ultima-conexion?vendedor=${this.filtroVendedor}`).then((e=>{this.tiempoUltimaConexion=e.data.fecha_ultima_conexion,this.ultimaPuestaOnline=e.data.ultima_puesta_online})).catch((e=>{console.error("Error al obtener fecha de la última conexión:",e)})):(this.tiempoUltimaConexion="N/A",this.ultimaPuestaOnline="N/A")},updateChartData(){this.chartOptions.series[0].data=[{value:this.totalLeadsAsignados,name:"En sistema"},{value:this.totalLeadsNuevos,name:"Nuevos"},{value:this.totalLeadsEnSeguimiento,name:"En seguimiento"},{value:this.totalLeadsCerrados,name:"Cerrados"},{value:this.totalLeadsCulminadosEnVenta,name:"Culminados en venta"}]},guardarLead(e){const a=localStorage.getItem("id_usuario");if(!a)return console.error("No se encontró el usuario_id en localStorage."),void alert("Error: Usuario no identificado. No se puede guardar el lead.");const o={...e,habeas_data:e.habeas_data||"Si",aceptacion_tratamiento_datos:e.aceptacion_tratamiento_datos||"Si",usuario_id:a};g.A.post("/update-lead",o).then((()=>{alert("Lead actualizado exitosamente"),this.cargarLeads()})).catch((e=>{console.error("Error al guardar el lead:",e.response?e.response.data:e),alert("No se pudo guardar el lead.")}))},eliminarLead(e){const a=localStorage.getItem("id_usuario");if(!a)return console.error("No se encontró el usuario_id en localStorage."),void alert("Error: Usuario no identificado. No se puede eliminar el lead.");confirm("¿Estás seguro de que deseas eliminar este lead?")&&g.A.post("/delete-lead",{lead_id:e,usuario_id:a}).then((e=>{alert(e.data.message),this.cargarLeads()})).catch((e=>{console.error("Error al eliminar el lead:",e.response?e.response.data:e),alert("No se pudo eliminar el lead.")}))},startResize(e,a){this.resizingColumn=a,this.initialX=e.clientX,this.initialWidth=this.columnWidths[a]||this.$el.querySelectorAll("th")[this.headers.indexOf(a)].offsetWidth,document.addEventListener("mousemove",this.resizeColumn),document.addEventListener("mouseup",this.stopResize)},resizeColumn(e){if(!this.resizingColumn)return;const a=e.clientX-this.initialX,o=Math.max(this.initialWidth+a,50)+"px";this.columnWidths={...this.columnWidths,[this.resizingColumn]:o}},stopResize(){document.removeEventListener("mousemove",this.resizeColumn),document.removeEventListener("mouseup",this.stopResize),this.resizingColumn=null}},created(){const e=localStorage.getItem("id_usuario");e?(this.cargarLeads(),this.cargarVendedores()):(alert("Sesión no válida. Por favor, inicia sesión nuevamente."),this.$router.push("/"))}};const Me=(0,i.A)(Oe,[["render",Ne],["__scopeId","data-v-51e71653"]]);var Pe=Me;const ze={id:"lead-expert",class:"container mt-4"},Ge={class:"contador-leads text-center mb-4"},We={class:"form-leads"},je={class:"row g-3"},Je={class:"col-md-6"},$e={class:"col-md-6"},He={class:"col-md-4"},Ke={class:"col-md-4"},qe={class:"col-md-4"},Be={class:"col-md-4"},Qe={class:"col-md-4"},Ye={class:"col-md-4"},Ze={class:"col-md-3"},ea=["value"],aa={class:"col-md-3"},oa=["value"],ta={class:"col-md-6"},la=["value"],na={class:"col-md-6"},ra={class:"col-md-6"},sa={class:"text-muted"},ia=["href"],da={class:"col-md-12 mt-4 d-flex justify-content-between"},ca={class:"signature-pad-container border border-secondary rounded",style:{width:"300px",height:"150px","background-color":"#f8f9fa",margin:"auto"}},ua={ref:"signaturePad",style:{display:"block",width:"100%",height:"100%"}},ma=["disabled"],ha={key:0},pa={key:1},va={class:"text-center mt-4"},La=["disabled"],ba={key:0},ka={key:1},fa={class:"text-center mt-4"},ga={key:0,class:"mt-4"},Ca={class:"table table-bordered"},Ea={key:0},_a={key:1},ya={class:"table table-bordered"},xa={key:0},Aa={key:1};function Va(e,a,o,n,r,s){const i=(0,l.g2)("BotonesGlobalesSalir");return(0,l.uX)(),(0,l.CE)("div",ze,[a[46]||(a[46]=(0,l.Lk)("div",{class:"header-image"},[(0,l.Lk)("img",{src:"/images/cabezote.jpg",alt:"Cabezote",class:"img-fluid w-100"})],-1)),a[47]||(a[47]=(0,l.Lk)("h1",{class:"text-center mt-5 mb-4"},"Formulario de Registro de Leads",-1)),(0,l.Lk)("div",Ge,[(0,l.Lk)("h4",null,"Leads registrados hoy: "+(0,m.v_)(r.leadsCapturadosHoy),1)]),(0,l.Lk)("div",We,[(0,l.Lk)("div",je,[(0,l.Lk)("div",Je,[a[18]||(a[18]=(0,l.Lk)("label",{for:"nombres",class:"form-label"},"Nombres",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=e=>r.lead.nombres=e),class:"form-control",required:""},null,512),[[t.Jo,r.lead.nombres]])]),(0,l.Lk)("div",$e,[a[19]||(a[19]=(0,l.Lk)("label",{for:"apellidos",class:"form-label"},"Apellidos",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text","onUpdate:modelValue":a[1]||(a[1]=e=>r.lead.apellidos=e),class:"form-control",required:""},null,512),[[t.Jo,r.lead.apellidos]])]),(0,l.Lk)("div",He,[a[20]||(a[20]=(0,l.Lk)("label",{for:"identificacion",class:"form-label"},"Identificación",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text","onUpdate:modelValue":a[2]||(a[2]=e=>r.lead.identificacion=e),class:"form-control"},null,512),[[t.Jo,r.lead.identificacion]])]),(0,l.Lk)("div",Ke,[a[21]||(a[21]=(0,l.Lk)("label",{for:"telefono",class:"form-label"},"Celular",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text","onUpdate:modelValue":a[3]||(a[3]=e=>r.lead.telefono=e),class:"form-control",required:""},null,512),[[t.Jo,r.lead.telefono]])]),(0,l.Lk)("div",qe,[a[22]||(a[22]=(0,l.Lk)("label",{for:"correo",class:"form-label"},"Correo Electrónico",-1)),(0,l.bo)((0,l.Lk)("input",{type:"email","onUpdate:modelValue":a[4]||(a[4]=e=>r.lead.correo=e),class:"form-control",required:""},null,512),[[t.Jo,r.lead.correo]])]),(0,l.Lk)("div",Be,[a[23]||(a[23]=(0,l.Lk)("label",{for:"direccion",class:"form-label"},"Dirección",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text","onUpdate:modelValue":a[5]||(a[5]=e=>r.lead.direccion=e),class:"form-control"},null,512),[[t.Jo,r.lead.direccion]])]),(0,l.Lk)("div",Qe,[a[25]||(a[25]=(0,l.Lk)("label",{for:"ciudad",class:"form-label"},"Ciudad",-1)),(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":a[6]||(a[6]=e=>r.lead.ciudad=e),class:"form-select",required:""},a[24]||(a[24]=[(0,l.Lk)("option",{disabled:"",value:""},"Selecciona una Ciudad",-1),(0,l.Lk)("option",{value:"Bogota"},"Bogotá y alrededores",-1)]),512),[[t.u1,r.lead.ciudad]])]),(0,l.Lk)("div",Ye,[a[26]||(a[26]=(0,l.Lk)("label",{for:"origen_lead",class:"form-label"},"Origen del Lead",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text","onUpdate:modelValue":a[7]||(a[7]=e=>r.lead.origen_lead=e),class:"form-control",placeholder:"Evento"},null,512),[[t.Jo,r.lead.origen_lead]])]),(0,l.Lk)("div",Ze,[a[28]||(a[28]=(0,l.Lk)("label",{for:"marca",class:"form-label"},"Marca de Interés",-1)),(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":a[8]||(a[8]=e=>r.lead.marca_interes=e),class:"form-select"},[a[27]||(a[27]=(0,l.Lk)("option",{disabled:"",value:""},"Selecciona una marca",-1)),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(r.marcasDisponibles,(e=>((0,l.uX)(),(0,l.CE)("option",{key:e,value:e},(0,m.v_)(e),9,ea)))),128))],512),[[t.u1,r.lead.marca_interes]])]),(0,l.Lk)("div",aa,[a[30]||(a[30]=(0,l.Lk)("label",{for:"modelo_interesado",class:"form-label"},"Modelo Interesado",-1)),(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":a[9]||(a[9]=e=>r.lead.modelo_interesado=e),class:"form-select",required:""},[a[29]||(a[29]=(0,l.Lk)("option",{disabled:"",value:""},"Selecciona un modelo",-1)),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(s.modelosFiltrados,(e=>((0,l.uX)(),(0,l.CE)("option",{key:e,value:e},(0,m.v_)(e),9,oa)))),128))],512),[[t.u1,r.lead.modelo_interesado]])]),(0,l.Lk)("div",ta,[a[32]||(a[32]=(0,l.Lk)("label",{for:"concesionario",class:"form-label"},"Concesionario",-1)),(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":a[10]||(a[10]=e=>r.lead.concesionario_id=e),class:"form-select",required:""},[a[31]||(a[31]=(0,l.Lk)("option",{disabled:"",value:""},"Seleccione un concesionario",-1)),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(r.concesionarios,(e=>((0,l.uX)(),(0,l.CE)("option",{key:e.id,value:e.id},(0,m.v_)(e.nombre_concesionario),9,la)))),128))],512),[[t.u1,r.lead.concesionario_id]])]),(0,l.Lk)("div",na,[a[34]||(a[34]=(0,l.Lk)("label",{for:"habeas_data",class:"form-label"},"Habeas Data",-1)),(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":a[11]||(a[11]=e=>r.lead.habeas_data=e),class:"form-select",required:""},a[33]||(a[33]=[(0,l.Lk)("option",{disabled:"",value:""},"Seleccione una opción",-1),(0,l.Lk)("option",{value:"Si"},"Si",-1),(0,l.Lk)("option",{value:"No"},"No",-1)]),512),[[t.u1,r.lead.habeas_data]])]),(0,l.Lk)("div",ra,[a[36]||(a[36]=(0,l.Lk)("label",{class:"form-label"},"Autorización de Tratamiento de Datos:",-1)),(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":a[12]||(a[12]=e=>r.lead.aceptacion_tratamiento_datos=e),class:"form-select",required:""},a[35]||(a[35]=[(0,l.Lk)("option",{disabled:"",value:""},"Seleccione una opción",-1),(0,l.Lk)("option",{value:"Si"},"Sí",-1),(0,l.Lk)("option",{value:"No"},"No",-1)]),512),[[t.u1,r.lead.aceptacion_tratamiento_datos]]),(0,l.Lk)("small",sa,[(0,l.Lk)("a",{href:s.obtenerEnlaceAutorizacion(),target:"_blank",onClick:a[13]||(a[13]=(...e)=>s.marcarVisitaEnlace&&s.marcarVisitaEnlace(...e))}," Ver términos de autorización ",8,ia)])]),(0,l.Lk)("div",da,[(0,l.Lk)("div",null,[a[37]||(a[37]=(0,l.Lk)("label",{for:"firma_digital",class:"form-label"},"Firma Digital",-1)),(0,l.Lk)("div",ca,[(0,l.Lk)("canvas",ua,null,512)]),(0,l.Lk)("button",{onClick:a[14]||(a[14]=(...e)=>s.limpiarFirma&&s.limpiarFirma(...e)),class:"btn btn-secondary mt-2"},"Limpiar Firma")]),(0,l.Lk)("button",{onClick:a[15]||(a[15]=(...e)=>s.consultarRNE&&s.consultarRNE(...e)),disabled:r.loading,class:(0,m.C4)(["btn",r.loading?"btn-secondary":"btn-warning"]),style:{height:"40px"}},[r.loading?((0,l.uX)(),(0,l.CE)("span",ha,a[38]||(a[38]=[(0,l.Lk)("i",{class:"spinner-border spinner-border-sm"},null,-1),(0,l.eW)(" Consultando... ")]))):((0,l.uX)(),(0,l.CE)("span",pa,"Consultar RNE"))],10,ma)])]),(0,l.Lk)("div",va,[(0,l.Lk)("button",{onClick:a[16]||(a[16]=(...e)=>s.guardarLead&&s.guardarLead(...e)),class:"btn btn-success",disabled:r.procesando},[r.procesando?((0,l.uX)(),(0,l.CE)("span",ba,a[39]||(a[39]=[(0,l.Lk)("i",{class:"spinner-border spinner-border-sm"},null,-1),(0,l.eW)(" Guardando... ")]))):((0,l.uX)(),(0,l.CE)("span",ka,"Guardar"))],8,La),(0,l.Lk)("button",{onClick:a[17]||(a[17]=(...e)=>s.limpiarCampos&&s.limpiarCampos(...e)),class:"btn btn-secondary"},"Limpiar Campos")]),(0,l.Lk)("div",fa,[(0,l.bF)(i)])]),r.resultadosRNE?((0,l.uX)(),(0,l.CE)("div",ga,[a[44]||(a[44]=(0,l.Lk)("h5",{class:"text-center"},"Resultado para Teléfono",-1)),(0,l.Lk)("table",Ca,[a[41]||(a[41]=(0,l.Lk)("thead",null,[(0,l.Lk)("tr",null,[(0,l.Lk)("th",null,"Número Telefónico"),(0,l.Lk)("th",null,"Acepta ser contactado por:"),(0,l.Lk)("th",null,"Tipo"),(0,l.Lk)("th",null,"Fecha Registro en RNE")])],-1)),(0,l.Lk)("tbody",null,[r.resultadosRNE.telefono?((0,l.uX)(),(0,l.CE)("tr",Ea,[(0,l.Lk)("td",null,(0,m.v_)(r.resultadosRNE.telefono.llave),1),(0,l.Lk)("td",null,[(0,l.Lk)("ul",null,[(0,l.Lk)("li",null,"SMS: "+(0,m.v_)(r.resultadosRNE.telefono.opcionesContacto.sms?"Sí":"No"),1),(0,l.Lk)("li",null,"Aplicación: "+(0,m.v_)(r.resultadosRNE.telefono.opcionesContacto.aplicacion?"Sí":"No"),1),(0,l.Lk)("li",null,"Llamada: "+(0,m.v_)(r.resultadosRNE.telefono.opcionesContacto.llamada?"Sí":"No"),1)])]),(0,l.Lk)("td",null,(0,m.v_)(r.resultadosRNE.telefono.tipo),1),(0,l.Lk)("td",null,(0,m.v_)(r.resultadosRNE.telefono.fechaCreacion),1)])):((0,l.uX)(),(0,l.CE)("tr",_a,a[40]||(a[40]=[(0,l.Lk)("td",{colspan:"4",class:"text-center"}," NO EXISTE REGISTRO PARA ESE NÚMERO TELEFÓNICO ",-1)])))])]),a[45]||(a[45]=(0,l.Lk)("h5",{class:"text-center mt-4"},"Resultado para Correo",-1)),(0,l.Lk)("table",ya,[a[43]||(a[43]=(0,l.Lk)("thead",null,[(0,l.Lk)("tr",null,[(0,l.Lk)("th",null,"Correo"),(0,l.Lk)("th",null,"Acepta ser contactado por:"),(0,l.Lk)("th",null,"Fecha Registro en RNE")])],-1)),(0,l.Lk)("tbody",null,[r.resultadosRNE.correo?((0,l.uX)(),(0,l.CE)("tr",xa,[(0,l.Lk)("td",null,(0,m.v_)(r.resultadosRNE.correo.llave),1),(0,l.Lk)("td",null,[(0,l.Lk)("ul",null,[(0,l.Lk)("li",null,"Correo Electrónico: "+(0,m.v_)(r.resultadosRNE.correo.opcionesContacto.correo_electronico?"Sí":"No"),1),(0,l.Lk)("li",null,"Aplicaciones: "+(0,m.v_)(r.resultadosRNE.correo.opcionesContacto.aplicacion?"Sí":"No"),1)])]),(0,l.Lk)("td",null,(0,m.v_)(r.resultadosRNE.correo.fechaCreacion),1)])):((0,l.uX)(),(0,l.CE)("tr",Aa,a[42]||(a[42]=[(0,l.Lk)("td",{colspan:"3",class:"text-center"}," NO EXISTE REGISTRO PARA ESE CORREO ",-1)])))])])])):(0,l.Q3)("",!0)])}function Sa(e,a,o,t,n,r){return(0,l.uX)(),(0,l.CE)("div",null,[(0,l.Lk)("button",{onClick:a[0]||(a[0]=(...e)=>r.logout&&r.logout(...e))},"Salir del Programa")])}var Ia={methods:{goToMenu(){const e=localStorage.getItem("tipo_usuario");"administrador"===e?this.$router.push("/menu"):"supervisor"===e?this.$router.push("/menu-supervisor"):"vendedor"===e&&this.$router.push("/menu-vendedor")},logout(){const e=localStorage.getItem("tipo_usuario");if("vendedor"===e){const e=localStorage.getItem("vendedor_actual");g.A.post("/update-vendedor-estado",{vendedor_id:e,estado:!1}).then((()=>{console.log("Vendedor marcado como fuera de línea al salir.")})).catch((e=>{console.error("Error al marcar al vendedor como fuera de línea:",e)}))}localStorage.removeItem("tipo_usuario"),this.$router.push("/")}}};const Na=(0,i.A)(Ia,[["render",Sa],["__scopeId","data-v-67093469"]]);var Fa=Na,Ta={data(){return{lead:{nombres:"",apellidos:"",identificacion:"",telefono:"",direccion:"",ciudad:"",correo:"",fecha_lead:this.obtenerFechaActual(),origen_lead:"Evento",marca_interes:"",modelo_interesado:"",concesionario_id:"",habeas_data:"",aceptacion_tratamiento_datos:"",estatus:"nuevo"},procesando:!1,marcasDisponibles:["Subaru","Suzuki","Citroen","Great Wall"],modelosPorMarca:{Subaru:["Forester","Evoltis","Crosstrek","Outback","WRX"],Suzuki:["Swift","Baleno","Grand Vitara","Jimny","S-Cross"],Citroen:["C3","C4 Cactus","Aircross","C5 Aircross"],"Great Wall":["Tank 500","Tank 300","H6","Ora","Jolion Pro","Jolion","Poer","Wingle 5","Wingle 7"]},concesionarios:[],leadsCapturadosHoy:0,isDrawing:!1,ctx:null,lastPos:{x:0,y:0},resultadosRNE:null,loading:!1}},mounted(){this.contarLeadsHoy(),this.inicializarFirma(),this.cargarConcesionarios()},computed:{modelosFiltrados(){return this.lead.marca_interes&&this.modelosPorMarca[this.lead.marca_interes]||[]}},methods:{obtenerEnlaceAutorizacion(){return"Subaru"===this.lead.marca_interes||"Citroen"===this.lead.marca_interes?"https://derco.com.co/wp-content/uploads/2024/09/JU-PO-02-POLITICA-INSTITUCIONAL-DE-TRATAMIENTO-Y-USO-DE-DATOS-E-INFORMACION-PERSONAL_1724169415.docx-f-f-f-f.pdf":"Suzuki"===this.lead.marca_interes||"Great Wall"===this.lead.marca_interes?"https://www.binariamedia.co":"#"},marcarVisitaEnlace(){this.enlaceVisitado=!0},async consultarRNE(){const{telefono:e,correo:a}=this.lead;if(e||a){this.loading=!0;try{const o=await g.A.post("/consultar-rne-expert",{telefono:e,correo:a});this.resultadosRNE=o.data}catch(o){console.error("Error al consultar el RNE:",o),alert("Hubo un problema al realizar la consulta. Intente nuevamente.")}finally{this.loading=!1}}else alert("Por favor, ingrese un teléfono o un correo para realizar la consulta.")},async cargarConcesionarios(){try{const e=await g.A.get("/get-concesionarios");this.concesionarios=e.data}catch(e){console.error("Error al cargar concesionarios:",e),alert("No se pudieron cargar los concesionarios. Intente nuevamente.")}},inicializarFirma(){const e=this.$refs.signaturePad;this.ctx=e.getContext("2d"),e.width=300,e.height=150,this.ctx.strokeStyle="black",this.ctx.lineWidth=2,e.addEventListener("mousedown",this.iniciarDibujo),e.addEventListener("mousemove",this.dibujar),e.addEventListener("mouseup",this.terminarDibujo),e.addEventListener("mouseout",this.terminarDibujo),e.addEventListener("touchstart",this.iniciarDibujo),e.addEventListener("touchmove",this.dibujar),e.addEventListener("touchend",this.terminarDibujo)},iniciarDibujo(e){e.preventDefault();const a=this.obtenerPosicion(e);this.isDrawing=!0,this.lastPos=a},dibujar(e){if(e.preventDefault(),!this.isDrawing)return;const a=this.obtenerPosicion(e);this.ctx.beginPath(),this.ctx.moveTo(this.lastPos.x,this.lastPos.y),this.ctx.lineTo(a.x,a.y),this.ctx.stroke(),this.lastPos=a},terminarDibujo(e){e.preventDefault(),this.isDrawing=!1},obtenerPosicion(e){const a=this.$refs.signaturePad,o=a.getBoundingClientRect();return e.touches&&e.touches[0]?{x:e.touches[0].clientX-o.left,y:e.touches[0].clientY-o.top}:{x:e.clientX-o.left,y:e.clientY-o.top}},limpiarFirma(){const e=this.$refs.signaturePad,a=e.getContext("2d");a.clearRect(0,0,e.width,e.height)},obtenerFechaActual(){return g.A.get("/get-current-time").then((e=>e.data.date)).catch((e=>(console.error("Error al obtener la fecha actual:",e),"")))},contarLeadsHoy(){const e=localStorage.getItem("id_usuario");if(!e)return alert("No se encontró el usuario. Por favor, inicie sesión nuevamente."),localStorage.clear(),void this.$router.push("/login");g.A.get(`/get-leads-count-expert?user_id=${e}`).then((e=>{console.log("✅ Cantidad de leads capturados hoy:",e.data.count),this.leadsCapturadosHoy=e.data.count})).catch((e=>{console.error("⚠️ Error al obtener la cantidad de leads de hoy:",e.response?.data||e)}))},async guardarLead(){if("Si"!==this.lead.habeas_data||"Si"!==this.lead.aceptacion_tratamiento_datos)return void alert("Debes aceptar tanto el Habeas Data como los términos de tratamiento de datos para guardar este lead.");const e=localStorage.getItem("id_usuario");if(e)try{this.procesando=!0;const a=this.$refs.signaturePad,o=a.toDataURL(),t={...this.lead,concesionario_id:this.lead.concesionario_id,firma_digital:o,fecha_lead:await this.obtenerFechaActual(),estatus:"nuevo",capturado_por:e};await g.A.post("/add-lead",t),alert("Lead guardado exitosamente."),this.limpiarCampos(),this.contarLeadsHoy()}catch(a){console.error("Error al guardar el lead:",a),alert("Hubo un error al guardar el lead.")}finally{this.procesando=!1}else alert("No se encontró el usuario. Por favor, inicie sesión nuevamente.")},async limpiarCampos(){try{const e=await this.obtenerFechaActual();this.lead={nombres:"",apellidos:"",identificacion:"",telefono:"",direccion:"",ciudad:"",correo:"",fecha_lead:e,origen_lead:"Evento",marca_interes:"",modelo_interesado:"",habeas_data:"",aceptacion_tratamiento_datos:"",estatus:"nuevo"},this.resultadosRNE=null,this.limpiarFirma()}catch(e){console.error("Error al obtener la fecha actual:",e)}}},components:{BotonesGlobalesSalir:Fa}};const wa=(0,i.A)(Ta,[["render",Va],["__scopeId","data-v-03df5a2e"]]);var Da=wa;const Ra={key:0,class:"estado-vendedores"};function Xa(e,a,o,t,n,r){return(0,l.uX)(),(0,l.CE)("div",null,[a[4]||(a[4]=(0,l.Lk)("h2",null,"Estado de Conexión de Vendedores",-1)),(0,l.Lk)("button",{onClick:a[0]||(a[0]=(...e)=>r.obtenerEstadoVendedores&&r.obtenerEstadoVendedores(...e))},"Verificar Conexión Vendedores"),n.vendedores.length>0?((0,l.uX)(),(0,l.CE)("table",Ra,[(0,l.Lk)("thead",null,[(0,l.Lk)("tr",null,[a[2]||(a[2]=(0,l.Lk)("th",null,"Nombre del Vendedor",-1)),a[3]||(a[3]=(0,l.Lk)("th",null,"Estado de Conexión",-1)),(0,l.Lk)("th",null,[(0,l.Lk)("button",{onClick:a[1]||(a[1]=(...e)=>r.refrescarEstadoVendedores&&r.refrescarEstadoVendedores(...e))},"Refrescar")])])]),(0,l.Lk)("tbody",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(n.vendedores,(e=>((0,l.uX)(),(0,l.CE)("tr",{key:e.id},[(0,l.Lk)("td",null,(0,m.v_)(e.nombre),1),(0,l.Lk)("td",null,[(0,l.Lk)("span",{class:(0,m.C4)(e.en_linea?"online":"offline")},(0,m.v_)(e.en_linea?"En línea":"Fuera de línea"),3)])])))),128))])])):(0,l.Q3)("",!0)])}var Ua={data(){return{vendedores:[],esAdministrador:!1}},created(){g.A.get("/user-info").then((e=>{this.esAdministrador=e.data.es_administrador})).catch((e=>{console.error("Error al obtener el rol del usuario:",e)}))},methods:{obtenerEstadoVendedores(){g.A.get("/estado-vendedores").then((e=>{this.vendedores=e.data.vendedores})).catch((e=>{console.error("Error al obtener el estado de los vendedores:",e)}))},refrescarEstadoVendedores(){this.obtenerEstadoVendedores()},regresar(){this.esAdministrador?this.$router.push("/menu"):this.$router.push("/leads-supervisor")}}};const Oa=(0,i.A)(Ua,[["render",Xa]]);var Ma=Oa;const Pa={key:0,class:"estado-vendedores"};function za(e,a,o,t,n,r){return(0,l.uX)(),(0,l.CE)("div",null,[a[4]||(a[4]=(0,l.Lk)("h2",null,"Estado de Conexión de Vendedores",-1)),(0,l.Lk)("button",{onClick:a[0]||(a[0]=(...e)=>r.obtenerEstadoVendedores&&r.obtenerEstadoVendedores(...e))},"Verificar Conexión Vendedores"),n.vendedores.length>0?((0,l.uX)(),(0,l.CE)("table",Pa,[(0,l.Lk)("thead",null,[(0,l.Lk)("tr",null,[a[2]||(a[2]=(0,l.Lk)("th",null,"Nombre del Vendedor",-1)),a[3]||(a[3]=(0,l.Lk)("th",null,"Estado de Conexión",-1)),(0,l.Lk)("th",null,[(0,l.Lk)("button",{onClick:a[1]||(a[1]=(...e)=>r.refrescarEstadoVendedores&&r.refrescarEstadoVendedores(...e))},"Refrescar")])])]),(0,l.Lk)("tbody",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(n.vendedores,(e=>((0,l.uX)(),(0,l.CE)("tr",{key:e.id},[(0,l.Lk)("td",null,(0,m.v_)(e.nombre),1),(0,l.Lk)("td",null,[(0,l.Lk)("span",{class:(0,m.C4)(e.en_linea?"online":"offline")},(0,m.v_)(e.en_linea?"En línea":"Fuera de línea"),3)])])))),128))])])):(0,l.Q3)("",!0)])}var Ga={data(){return{vendedores:[]}},methods:{obtenerEstadoVendedores(){g.A.get("/estado-vendedores").then((e=>{this.vendedores=e.data.vendedores})).catch((e=>{console.error("Error al obtener el estado de los vendedores:",e)}))},refrescarEstadoVendedores(){this.obtenerEstadoVendedores()},regresar(){this.$router.push("/leads-supervisor")}}};const Wa=(0,i.A)(Ga,[["render",za]]);var ja=Wa;const Ja={class:"container mt-4"},$a={class:"row g-3 mb-4"},Ha={class:"col-md-4"},Ka=["value"],qa={class:"col-md-4"},Ba={class:"text-center mb-4"},Qa={key:0,class:"text-center mb-3"},Ya={key:1,class:"table-responsive"},Za={class:"table table-bordered"};function eo(e,a,o,n,r,s){return(0,l.uX)(),(0,l.CE)("div",Ja,[a[7]||(a[7]=(0,l.Lk)("h1",{class:"text-center mb-4"},"Leads Capturados por Experts",-1)),(0,l.Lk)("div",$a,[(0,l.Lk)("div",Ha,[a[4]||(a[4]=(0,l.Lk)("label",{class:"form-label"},"Filtrar por usuario expert:",-1)),(0,l.bo)((0,l.Lk)("select",{class:"form-select","onUpdate:modelValue":a[0]||(a[0]=e=>r.filtroUsuarioExpert=e)},[a[3]||(a[3]=(0,l.Lk)("option",{value:""},"Todos",-1)),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(r.expertos,(e=>((0,l.uX)(),(0,l.CE)("option",{key:e.id,value:e.id},(0,m.v_)(e.nombre),9,Ka)))),128))],512),[[t.u1,r.filtroUsuarioExpert]])]),(0,l.Lk)("div",qa,[a[5]||(a[5]=(0,l.Lk)("label",{class:"form-label"},"Filtrar por fecha:",-1)),(0,l.bo)((0,l.Lk)("input",{type:"date",class:"form-control","onUpdate:modelValue":a[1]||(a[1]=e=>r.filtroFecha=e)},null,512),[[t.Jo,r.filtroFecha]])])]),(0,l.Lk)("div",Ba,[(0,l.Lk)("button",{class:"btn btn-primary",onClick:a[2]||(a[2]=(...e)=>s.generarConsulta&&s.generarConsulta(...e))},"Generar Consulta")]),r.consultaGenerada?((0,l.uX)(),(0,l.CE)("div",Qa,[(0,l.Lk)("p",null,[(0,l.Lk)("strong",null,"Total de registros encontrados: "+(0,m.v_)(r.totalRegistros),1)])])):(0,l.Q3)("",!0),r.consultaGenerada?((0,l.uX)(),(0,l.CE)("div",Ya,[(0,l.Lk)("table",Za,[a[6]||(a[6]=(0,l.Lk)("thead",{class:"table-dark"},[(0,l.Lk)("tr",null,[(0,l.Lk)("th",null,"Nombres"),(0,l.Lk)("th",null,"Apellidos"),(0,l.Lk)("th",null,"Identificación"),(0,l.Lk)("th",null,"Teléfono"),(0,l.Lk)("th",null,"Correo"),(0,l.Lk)("th",null,"Fecha Lead"),(0,l.Lk)("th",null,"Origen Lead"),(0,l.Lk)("th",null,"Marca de Interés"),(0,l.Lk)("th",null,"Modelo Interesado")])],-1)),(0,l.Lk)("tbody",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(r.leadsFiltrados,(e=>((0,l.uX)(),(0,l.CE)("tr",{key:e.id},[(0,l.Lk)("td",null,(0,m.v_)(e.nombres),1),(0,l.Lk)("td",null,(0,m.v_)(e.apellidos),1),(0,l.Lk)("td",null,(0,m.v_)(e.identificacion),1),(0,l.Lk)("td",null,(0,m.v_)(e.telefono),1),(0,l.Lk)("td",null,(0,m.v_)(e.correo),1),(0,l.Lk)("td",null,(0,m.v_)(e.fecha_lead),1),(0,l.Lk)("td",null,(0,m.v_)(e.origen_lead),1),(0,l.Lk)("td",null,(0,m.v_)(e.marca_interes),1),(0,l.Lk)("td",null,(0,m.v_)(e.modelo_interesado),1)])))),128))])])])):(0,l.Q3)("",!0)])}var ao={data(){return{leads:[],leadsFiltrados:[],expertos:[],consultaGenerada:!1,filtroUsuarioExpert:"",filtroFecha:"",totalRegistros:0}},methods:{generarConsulta(){const e={expert_id:this.filtroUsuarioExpert||null,fecha:this.filtroFecha||null};g.A.get("/leads-capturados-expert",{params:e}).then((e=>{this.leads=e.data,this.leadsFiltrados=[...this.leads],this.totalRegistros=this.leads.length,this.consultaGenerada=!0})).catch((e=>{console.error("Error al generar la consulta de leads:",e)}))},cargarUsuariosExpert(){g.A.get("/get-usuarios-expert").then((e=>{this.expertos=e.data})).catch((e=>{console.error("Error al cargar usuarios expertos:",e)}))},formatFecha(e){if(!e)return"";const a={year:"numeric",month:"2-digit",day:"2-digit"};return new Date(e).toLocaleDateString("es-CO",a)},regresarPaginaAnterior(){this.$router.go(-1)}},mounted(){this.cargarUsuariosExpert()}};const oo=(0,i.A)(ao,[["render",eo],["__scopeId","data-v-16c7cbdc"]]);var to=oo;const lo={class:"container mt-4"},no={class:"row g-3 mb-4"},ro={class:"col-md-3"},so=["value"],io={class:"col-md-3"},co={class:"col-md-3"},uo={class:"col-md-3"},mo={class:"text-center mb-4"},ho={class:"navigation-buttons text-center mt-4"},po={key:0,class:"table-responsive"},vo={class:"table table-bordered"};function Lo(e,a,o,n,r,s){const i=(0,l.g2)("BotonesGlobales");return(0,l.uX)(),(0,l.CE)("div",lo,[a[12]||(a[12]=(0,l.Lk)("h1",{class:"text-center mb-4"},"Consultas Realizadas a la RNE",-1)),(0,l.Lk)("div",no,[(0,l.Lk)("div",ro,[a[7]||(a[7]=(0,l.Lk)("label",{class:"form-label"},"Filtrar por Vendedor:",-1)),(0,l.bo)((0,l.Lk)("select",{class:"form-select","onUpdate:modelValue":a[0]||(a[0]=e=>r.filtroVendedor=e)},[a[6]||(a[6]=(0,l.Lk)("option",{value:""},"Todos",-1)),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(r.vendedores,(e=>((0,l.uX)(),(0,l.CE)("option",{key:e.id,value:e.id},(0,m.v_)(e.nombre),9,so)))),128))],512),[[t.u1,r.filtroVendedor]])]),(0,l.Lk)("div",io,[a[8]||(a[8]=(0,l.Lk)("label",{class:"form-label"},"Filtrar por Fecha:",-1)),(0,l.bo)((0,l.Lk)("input",{type:"date",class:"form-control","onUpdate:modelValue":a[1]||(a[1]=e=>r.filtroFecha=e)},null,512),[[t.Jo,r.filtroFecha]])]),(0,l.Lk)("div",co,[a[9]||(a[9]=(0,l.Lk)("label",{class:"form-label"},"Filtrar por Teléfono:",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":a[2]||(a[2]=e=>r.filtroTelefono=e)},null,512),[[t.Jo,r.filtroTelefono]])]),(0,l.Lk)("div",uo,[a[10]||(a[10]=(0,l.Lk)("label",{class:"form-label"},"Filtrar por Correo:",-1)),(0,l.bo)((0,l.Lk)("input",{type:"email",class:"form-control","onUpdate:modelValue":a[3]||(a[3]=e=>r.filtroCorreo=e)},null,512),[[t.Jo,r.filtroCorreo]])])]),(0,l.Lk)("div",mo,[(0,l.Lk)("button",{class:"btn btn-primary",onClick:a[4]||(a[4]=(...e)=>s.generarConsulta&&s.generarConsulta(...e))},"Ver Consultas Realizadas"),(0,l.Lk)("button",{class:"btn btn-secondary",onClick:a[5]||(a[5]=(...e)=>s.exportarCSV&&s.exportarCSV(...e))},"Exportar CSV")]),(0,l.Lk)("div",ho,[(0,l.bF)(i)]),r.consultas.length?((0,l.uX)(),(0,l.CE)("div",po,[(0,l.Lk)("table",vo,[a[11]||(a[11]=(0,l.Lk)("thead",{class:"table-dark"},[(0,l.Lk)("tr",null,[(0,l.Lk)("th",null,"Vendedor"),(0,l.Lk)("th",null,"Teléfono Consultado"),(0,l.Lk)("th",null,"Correo Consultado"),(0,l.Lk)("th",null,"Fecha Consulta"),(0,l.Lk)("th",null,"Tipo"),(0,l.Lk)("th",null,"SMS"),(0,l.Lk)("th",null,"Aplicación"),(0,l.Lk)("th",null,"Llamada"),(0,l.Lk)("th",null,"Fecha Creación TEL"),(0,l.Lk)("th",null,"Aplicación CORR"),(0,l.Lk)("th",null,"Correo CORR"),(0,l.Lk)("th",null,"Fecha Creación CORR")])],-1)),(0,l.Lk)("tbody",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(r.consultas,(e=>((0,l.uX)(),(0,l.CE)("tr",{key:e.id},[(0,l.Lk)("td",null,(0,m.v_)(e.vendedor),1),(0,l.Lk)("td",null,(0,m.v_)(e.consulta_tel),1),(0,l.Lk)("td",null,(0,m.v_)(e.consulta_corr),1),(0,l.Lk)("td",null,(0,m.v_)(s.formatFecha(e.fecha_consulta)),1),(0,l.Lk)("td",null,(0,m.v_)(e.tipo),1),(0,l.Lk)("td",null,(0,m.v_)(e.sms),1),(0,l.Lk)("td",null,(0,m.v_)(e.aplicacion),1),(0,l.Lk)("td",null,(0,m.v_)(e.llamada),1),(0,l.Lk)("td",null,(0,m.v_)(e.fecha_creacion_tel),1),(0,l.Lk)("td",null,(0,m.v_)(e.aplicacion_corr),1),(0,l.Lk)("td",null,(0,m.v_)(e.correo_corr),1),(0,l.Lk)("td",null,(0,m.v_)(e.fecha_creacion_corr),1)])))),128))])])])):(0,l.Q3)("",!0)])}o(1454),o(4603),o(7566),o(8721);var bo={data(){return{consultas:[],vendedores:[],filtroVendedor:"",filtroFecha:"",filtroTelefono:"",filtroCorreo:""}},methods:{generarConsulta(){const e={vendedor_id:this.filtroVendedor||null,fecha:this.filtroFecha||null,telefono:this.filtroTelefono||null,correo:this.filtroCorreo||null};g.A.get("/get-log-consultas-rne",{params:e}).then((e=>{this.consultas=e.data})).catch((e=>{console.error("Error al generar la consulta:",e)}))},exportarCSV(){const e=this.consultas.map((e=>[e.vendedor,e.consulta_tel,e.consulta_corr,e.fecha_consulta,e.tipo,e.sms,e.aplicacion,e.llamada,e.fecha_creacion_tel,e.aplicacion_corr,e.correo_corr,e.fecha_creacion_corr].join(";"))).join("\n"),a=new Blob([e],{type:"text/csv;charset=utf-8;"}),o=document.createElement("a");o.href=URL.createObjectURL(a),o.setAttribute("download","resultados_consultas_realizadas_RNE.csv"),document.body.appendChild(o),o.click(),document.body.removeChild(o)},formatFecha(e){if(!e)return"";const a={year:"numeric",month:"2-digit",day:"2-digit"};return new Date(e).toLocaleDateString("es-CO",a)},cargarVendedores(){g.A.get("/get-vendedores").then((e=>{this.vendedores=e.data})).catch((e=>{console.error("Error al cargar vendedores:",e)}))}},mounted(){this.cargarVendedores()},components:{BotonesGlobales:q.A}};const ko=(0,i.A)(bo,[["render",Lo]]);var fo=ko;const go={id:"supervisor-leads",class:"container mt-4"},Co={class:"text-center mb-4"},Eo={class:"row mb-4"},_o={class:"col-md-8"},yo={class:"chart-container d-flex justify-content-center"},xo={class:"col-md-4"},Ao={class:"totalizadores border p-3 rounded"},Vo={class:"d-flex justify-content-center mb-4"},So={key:0,class:"filtros mb-4 row g-3"},Io={class:"col-md-6"},No=["value"],Fo={class:"col-md-6"},To=["value"],wo={key:1,class:"filtros mb-4 row g-3"},Do={class:"col-md-3"},Ro={class:"col-md-3"},Xo={class:"col-md-3"},Uo={class:"col-md-3"},Oo={key:2,class:"table-responsive"},Mo={class:"table table-bordered table-striped"},Po=["onClick"],zo=["onClick"],Go={key:3,class:"card p-4 mt-3"},Wo={class:"row g-3"},jo={class:"col-md-4"},Jo={class:"col-md-4"},$o={class:"col-md-4"},Ho={class:"col-md-4"},Ko={class:"col-md-4"},qo={class:"col-md-4"},Bo=["value"],Qo={class:"col-md-4"},Yo={class:"col-4"},Zo=["value"],et={class:"col-md-4"},at={class:"col-md-4"},ot=["value"],tt={class:"col-md-4"},lt={class:"col-md-12"},nt={class:"text-center mt-3"};function rt(e,a,o,n,r,s){const i=(0,l.g2)("v-chart");return(0,l.uX)(),(0,l.CE)("div",go,[a[67]||(a[67]=(0,l.Lk)("h1",{class:"text-center mb-4"},"Gerencia y Reporte de Leads",-1)),(0,l.Lk)("div",Co,[(0,l.Lk)("button",{class:"btn btn-primary",onClick:a[0]||(a[0]=(...e)=>s.generarContenidoTabla&&s.generarContenidoTabla(...e))},"Generar Contenido Tabla")]),(0,l.Lk)("div",Eo,[(0,l.Lk)("div",_o,[(0,l.Lk)("div",yo,[(0,l.bF)(i,{option:r.chartOptions,style:{width:"100%",height:"350px"}},null,8,["option"])])]),(0,l.Lk)("div",xo,[(0,l.Lk)("div",Ao,[(0,l.Lk)("p",null,[a[32]||(a[32]=(0,l.eW)("Total leads en sistema: ")),(0,l.Lk)("strong",null,(0,m.v_)(r.totalLeadsAsignados),1)]),(0,l.Lk)("p",null,[a[33]||(a[33]=(0,l.eW)("Total leads Nuevos: ")),(0,l.Lk)("strong",null,(0,m.v_)(r.totalLeadsNuevos),1)]),(0,l.Lk)("p",null,[a[34]||(a[34]=(0,l.eW)("Total leads asignados: ")),(0,l.Lk)("strong",null,(0,m.v_)(r.totalLeadsAsignadosEstado),1)]),(0,l.Lk)("p",null,[a[35]||(a[35]=(0,l.eW)("Total leads en seguimiento: ")),(0,l.Lk)("strong",null,(0,m.v_)(r.totalLeadsEnSeguimiento),1)]),(0,l.Lk)("p",null,[a[36]||(a[36]=(0,l.eW)("Total leads cerrados: ")),(0,l.Lk)("strong",null,(0,m.v_)(r.totalLeadsCerrados),1)]),(0,l.Lk)("p",null,[a[37]||(a[37]=(0,l.eW)("Total leads culminados en venta: ")),(0,l.Lk)("strong",null,(0,m.v_)(r.totalLeadsCulminadosEnVenta),1)]),(0,l.Lk)("p",null,[a[38]||(a[38]=(0,l.eW)("Total leads con Test Drive: ")),(0,l.Lk)("strong",null,(0,m.v_)(r.totalLeadsConTestDrive),1)]),(0,l.Lk)("p",null,[a[39]||(a[39]=(0,l.eW)("Última conexión del vendedor: ")),(0,l.Lk)("strong",null,(0,m.v_)(r.tiempoUltimaConexion),1)]),(0,l.Lk)("p",null,[a[40]||(a[40]=(0,l.eW)("Última puesta en línea: ")),(0,l.Lk)("strong",null,(0,m.v_)(r.ultimaPuestaOnline),1)])])])]),(0,l.Lk)("div",Vo,[(0,l.Lk)("button",{class:"btn btn-success me-2",onClick:a[1]||(a[1]=e=>s.exportarReporte("pdf"))},"Exportar PDF"),(0,l.Lk)("button",{class:"btn btn-info me-2",onClick:a[2]||(a[2]=e=>s.exportarReporte("csv"))},"Exportar CSV"),(0,l.Lk)("button",{class:"btn btn-warning me-2",onClick:a[3]||(a[3]=e=>s.exportarReporte("excel"))},"Exportar Excel")]),r.contenidoGenerado?((0,l.uX)(),(0,l.CE)("div",So,[(0,l.Lk)("div",Io,[a[42]||(a[42]=(0,l.Lk)("label",{class:"form-label"},"Filtrar por Marca:",-1)),(0,l.bo)((0,l.Lk)("select",{class:"form-select","onUpdate:modelValue":a[4]||(a[4]=e=>r.filtroMarca=e),onChange:a[5]||(a[5]=(...e)=>s.filtrarLeads&&s.filtrarLeads(...e))},[a[41]||(a[41]=(0,l.Lk)("option",{value:""},"Todos",-1)),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(r.marcasDisponibles,(e=>((0,l.uX)(),(0,l.CE)("option",{key:e,value:e},(0,m.v_)(e),9,No)))),128))],544),[[t.u1,r.filtroMarca]])]),(0,l.Lk)("div",Fo,[a[44]||(a[44]=(0,l.Lk)("label",{class:"form-label"},"Filtrar por vendedor:",-1)),(0,l.bo)((0,l.Lk)("select",{class:"form-select","onUpdate:modelValue":a[6]||(a[6]=e=>r.filtroVendedor=e),onChange:a[7]||(a[7]=(...e)=>s.filtrarLeads&&s.filtrarLeads(...e))},[a[43]||(a[43]=(0,l.Lk)("option",{value:""},"Todos",-1)),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(r.vendedores,(e=>((0,l.uX)(),(0,l.CE)("option",{key:e.id,value:String(e.id)},(0,m.v_)(e.nombre),9,To)))),128))],544),[[t.u1,r.filtroVendedor,void 0,{number:!0}]])])])):(0,l.Q3)("",!0),r.contenidoGenerado?((0,l.uX)(),(0,l.CE)("div",wo,[(0,l.Lk)("div",Do,[a[46]||(a[46]=(0,l.Lk)("label",{class:"form-label"},"Filtrar por estado:",-1)),(0,l.bo)((0,l.Lk)("select",{class:"form-select","onUpdate:modelValue":a[8]||(a[8]=e=>r.filtroEstado=e),onChange:a[9]||(a[9]=(...e)=>s.filtrarLeads&&s.filtrarLeads(...e))},a[45]||(a[45]=[(0,l.Fv)('<option value="" data-v-f7570ca8>Todos</option><option value="nuevo" data-v-f7570ca8>Nuevo</option><option value="asignado" data-v-f7570ca8>Asignado</option><option value="en seguimiento" data-v-f7570ca8>En Seguimiento</option><option value="cerrado" data-v-f7570ca8>Cerrado</option><option value="culmina en venta" data-v-f7570ca8>Culmina en Venta</option>',6)]),544),[[t.u1,r.filtroEstado]])]),(0,l.Lk)("div",Ro,[a[48]||(a[48]=(0,l.Lk)("label",{class:"form-label"},"Filtrar por Test Drive:",-1)),(0,l.bo)((0,l.Lk)("select",{class:"form-select","onUpdate:modelValue":a[10]||(a[10]=e=>r.filtroTestDrive=e),onChange:a[11]||(a[11]=(...e)=>s.filtrarLeads&&s.filtrarLeads(...e))},a[47]||(a[47]=[(0,l.Lk)("option",{value:""},"Todos",-1),(0,l.Lk)("option",{value:"Si"},"Si",-1),(0,l.Lk)("option",{value:"No"},"No",-1)]),544),[[t.u1,r.filtroTestDrive]])]),(0,l.Lk)("div",Xo,[a[49]||(a[49]=(0,l.Lk)("label",{class:"form-label"},"Fecha desde:",-1)),(0,l.bo)((0,l.Lk)("input",{type:"date",class:"form-control","onUpdate:modelValue":a[12]||(a[12]=e=>r.filtroFechaDesde=e),onChange:a[13]||(a[13]=(...e)=>s.filtrarLeads&&s.filtrarLeads(...e))},null,544),[[t.Jo,r.filtroFechaDesde]])]),(0,l.Lk)("div",Uo,[a[50]||(a[50]=(0,l.Lk)("label",{class:"form-label"},"Fecha hasta:",-1)),(0,l.bo)((0,l.Lk)("input",{type:"date",class:"form-control","onUpdate:modelValue":a[14]||(a[14]=e=>r.filtroFechaHasta=e),onChange:a[15]||(a[15]=(...e)=>s.filtrarLeads&&s.filtrarLeads(...e))},null,544),[[t.Jo,r.filtroFechaHasta]])])])):(0,l.Q3)("",!0),r.contenidoGenerado?((0,l.uX)(),(0,l.CE)("div",Oo,[(0,l.Lk)("table",Mo,[a[51]||(a[51]=(0,l.Lk)("thead",{class:"table-dark"},[(0,l.Lk)("tr",null,[(0,l.Lk)("th",null,"Vendedor"),(0,l.Lk)("th",null,"Nombres"),(0,l.Lk)("th",null,"Apellidos"),(0,l.Lk)("th",null,"Identificación"),(0,l.Lk)("th",null,"Teléfono"),(0,l.Lk)("th",null,"Dirección"),(0,l.Lk)("th",null,"Ciudad"),(0,l.Lk)("th",null,"Correo"),(0,l.Lk)("th",null,"Fecha Lead"),(0,l.Lk)("th",null,"Origen Lead"),(0,l.Lk)("th",null,"Marca de Interés"),(0,l.Lk)("th",null,"Modelo Interesado"),(0,l.Lk)("th",null,"Precio de Venta"),(0,l.Lk)("th",null,"Estatus"),(0,l.Lk)("th",null,"Test Drive"),(0,l.Lk)("th",null,"Seguimientos"),(0,l.Lk)("th",null,"Acciones")])],-1)),(0,l.Lk)("tbody",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(r.leadsFiltrados,(e=>((0,l.uX)(),(0,l.CE)("tr",{key:e.id},[(0,l.Lk)("td",null,(0,m.v_)(e.vendedor_nombre),1),(0,l.Lk)("td",null,(0,m.v_)(e.nombres),1),(0,l.Lk)("td",null,(0,m.v_)(e.apellidos),1),(0,l.Lk)("td",null,(0,m.v_)(e.identificacion),1),(0,l.Lk)("td",null,(0,m.v_)(e.telefono),1),(0,l.Lk)("td",null,(0,m.v_)(e.direccion),1),(0,l.Lk)("td",null,(0,m.v_)(e.ciudad),1),(0,l.Lk)("td",null,(0,m.v_)(e.correo),1),(0,l.Lk)("td",null,(0,m.v_)(e.fecha_lead),1),(0,l.Lk)("td",null,(0,m.v_)(e.origen_lead),1),(0,l.Lk)("td",null,(0,m.v_)(e.marca_interes),1),(0,l.Lk)("td",null,(0,m.v_)(e.modelo_interesado),1),(0,l.Lk)("td",null,(0,m.v_)(void 0!==e.precio_venta?Number(e.precio_venta).toLocaleString("es-CO",{minimumFractionDigits:0,maximumFractionDigits:0}):"0"),1),(0,l.Lk)("td",null,(0,m.v_)(e.estatus),1),(0,l.Lk)("td",null,(0,m.v_)(e.test_drive),1),(0,l.Lk)("td",null,(0,m.v_)(e.seguimientos),1),(0,l.Lk)("td",null,[r.leadEditando!==e.id?((0,l.uX)(),(0,l.CE)("button",{key:0,class:"btn btn-primary",onClick:a=>s.editarLead(e)},"Editar",8,Po)):(0,l.Q3)("",!0),r.leadEditando===e.id?((0,l.uX)(),(0,l.CE)("button",{key:1,class:"btn btn-success",onClick:a[16]||(a[16]=(...e)=>s.guardarEdicion&&s.guardarEdicion(...e))},"Guardar")):(0,l.Q3)("",!0),r.leadEditando===e.id?((0,l.uX)(),(0,l.CE)("button",{key:2,class:"btn btn-danger",onClick:a[17]||(a[17]=(...e)=>s.cancelarEdicion&&s.cancelarEdicion(...e))},"Cancelar")):(0,l.Q3)("",!0),(0,l.Lk)("button",{class:"btn btn-outline-danger btn-sm",onClick:a=>s.eliminarLead(e)},"Eliminar",8,zo)])])))),128))])])])):(0,l.Q3)("",!0),r.leadEditando?((0,l.uX)(),(0,l.CE)("div",Go,[a[66]||(a[66]=(0,l.Lk)("h3",{class:"text-center"},"Editar Lead",-1)),(0,l.Lk)("div",Wo,[(0,l.Lk)("div",jo,[a[52]||(a[52]=(0,l.Lk)("label",{class:"form-label"},"Nombres",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text","onUpdate:modelValue":a[18]||(a[18]=e=>r.leadSeleccionado.nombres=e),class:"form-control"},null,512),[[t.Jo,r.leadSeleccionado.nombres]])]),(0,l.Lk)("div",Jo,[a[53]||(a[53]=(0,l.Lk)("label",{class:"form-label"},"Apellidos",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text","onUpdate:modelValue":a[19]||(a[19]=e=>r.leadSeleccionado.apellidos=e),class:"form-control"},null,512),[[t.Jo,r.leadSeleccionado.apellidos]])]),(0,l.Lk)("div",$o,[a[54]||(a[54]=(0,l.Lk)("label",{class:"form-label"},"Cédula",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text","onUpdate:modelValue":a[20]||(a[20]=e=>r.leadSeleccionado.identificacion=e),class:"form-control"},null,512),[[t.Jo,r.leadSeleccionado.identificacion]])]),(0,l.Lk)("div",Ho,[a[55]||(a[55]=(0,l.Lk)("label",{class:"form-label"},"Correo",-1)),(0,l.bo)((0,l.Lk)("input",{type:"email","onUpdate:modelValue":a[21]||(a[21]=e=>r.leadSeleccionado.correo=e),class:"form-control"},null,512),[[t.Jo,r.leadSeleccionado.correo]])]),(0,l.Lk)("div",Ko,[a[56]||(a[56]=(0,l.Lk)("label",{class:"form-label"},"Teléfono",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text","onUpdate:modelValue":a[22]||(a[22]=e=>r.leadSeleccionado.telefono=e),class:"form-control"},null,512),[[t.Jo,r.leadSeleccionado.telefono]])]),(0,l.Lk)("div",qo,[a[57]||(a[57]=(0,l.Lk)("label",{class:"form-label"},"Marca",-1)),(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":a[23]||(a[23]=e=>r.leadSeleccionado.marca_interes=e),class:"form-select"},[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(r.marcasDisponibles,(e=>((0,l.uX)(),(0,l.CE)("option",{key:e,value:e},(0,m.v_)(e),9,Bo)))),128))],512),[[t.u1,r.leadSeleccionado.marca_interes]])]),(0,l.Lk)("div",Qo,[a[58]||(a[58]=(0,l.Lk)("label",{class:"form-label"},"Modelo",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text","onUpdate:modelValue":a[24]||(a[24]=e=>r.leadSeleccionado.modelo_interesado=e),class:"form-control"},null,512),[[t.Jo,r.leadSeleccionado.modelo_interesado]])]),(0,l.Lk)("div",Yo,[a[59]||(a[59]=(0,l.Lk)("label",{class:"form-label"},"Precio de Venta",-1)),(0,l.Lk)("input",{type:"text",class:"form-control",value:r.leadSeleccionado.precio_venta?Number(r.leadSeleccionado.precio_venta).toLocaleString("es-CO",{minimumFractionDigits:0,maximumFractionDigits:0}):"",onInput:a[25]||(a[25]=e=>r.leadSeleccionado.precio_venta=e.target.value.replace(/\./g,""))},null,40,Zo)]),(0,l.Lk)("div",et,[a[61]||(a[61]=(0,l.Lk)("label",{class:"form-label"},"Estatus",-1)),(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":a[26]||(a[26]=e=>r.leadSeleccionado.estatus=e),class:"form-select"},a[60]||(a[60]=[(0,l.Fv)('<option value="nuevo" data-v-f7570ca8>Nuevo</option><option value="asignado" data-v-f7570ca8>Asignado</option><option value="en seguimiento" data-v-f7570ca8>En Seguimiento</option><option value="cerrado" data-v-f7570ca8>Cerrado</option><option value="culmina en venta" data-v-f7570ca8>Culmina en Venta</option>',5)]),512),[[t.u1,r.leadSeleccionado.estatus]])]),(0,l.Lk)("div",at,[a[62]||(a[62]=(0,l.Lk)("label",{class:"form-label"},"Vendedor",-1)),(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":a[27]||(a[27]=e=>r.leadSeleccionado.vendedor_id=e),class:"form-select"},[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(r.vendedores,(e=>((0,l.uX)(),(0,l.CE)("option",{key:e.id,value:e.id},(0,m.v_)(e.nombre),9,ot)))),128))],512),[[t.u1,r.leadSeleccionado.vendedor_id]])]),(0,l.Lk)("div",tt,[a[64]||(a[64]=(0,l.Lk)("label",{class:"form-label"},"Test Drive",-1)),(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":a[28]||(a[28]=e=>r.leadSeleccionado.test_drive=e),class:"form-select"},a[63]||(a[63]=[(0,l.Lk)("option",{value:"Si"},"Sí",-1),(0,l.Lk)("option",{value:"No"},"No",-1)]),512),[[t.u1,r.leadSeleccionado.test_drive]])]),(0,l.Lk)("div",lt,[a[65]||(a[65]=(0,l.Lk)("label",{class:"form-label"},"Seguimiento",-1)),(0,l.bo)((0,l.Lk)("textarea",{"onUpdate:modelValue":a[29]||(a[29]=e=>r.leadSeleccionado.seguimientos=e),class:"form-control"},null,512),[[t.Jo,r.leadSeleccionado.seguimientos]])])]),(0,l.Lk)("div",nt,[(0,l.Lk)("button",{class:"btn btn-success me-2",onClick:a[30]||(a[30]=(...e)=>s.guardarEdicion&&s.guardarEdicion(...e))},"Guardar"),(0,l.Lk)("button",{class:"btn btn-danger",onClick:a[31]||(a[31]=(...e)=>s.cancelarEdicion&&s.cancelarEdicion(...e))},"Cancelar")])])):(0,l.Q3)("",!0)])}o(2577);(0,Te.Y)([De.a,Re.a,Xe.a,we.a,Ue.a]);var st={components:{VChart:Fe.Ay},data(){return{headers:["Nombres","Apellidos","Identificación","Teléfono","Dirección","Ciudad","Correo","Fecha Lead","Origen Lead","Marca de Interés","Modelo Interesado","Precio de Venta","Estatus","Test Drive","Seguimientos","Vendedor"],usuarioId:null,leads:[],leadsFiltrados:[],concesionarios:[],vendedores:[],marcasDisponibles:["Subaru","Suzuki","Citroen","Great Wall"],leadEditando:null,leadSeleccionado:{},filtroMarca:"",filtroVendedor:"",filtroEstado:"",filtroTestDrive:"",filtroFechaDesde:"",filtroFechaHasta:"",totalLeadsAsignados:0,totalLeadsNuevos:0,totalLeadsAsignadosEstado:0,totalLeadsEnSeguimiento:0,totalLeadsCerrados:0,totalLeadsCulminadosEnVenta:0,totalLeadsConTestDrive:0,tiempoUltimaConexion:"",ultimaPuestaOnline:"",contenidoGenerado:!1,columnWidths:{},resizingColumn:null,initialX:0,initialWidth:0,chartOptions:{tooltip:{trigger:"item"},legend:{top:"bottom"},series:[{type:"funnel",left:"10%",width:"80%",sort:"descending",label:{show:!0,position:"inside"},data:[{value:this.totalLeadsAsignados,name:"En sistema"},{value:this.totalLeadsNuevos,name:"Nuevo"},{value:this.totalLeadsEnSeguimiento,name:"En seguimiento"},{value:this.totalLeadsCerrados,name:"Cerrados"},{value:this.totalLeadsCulminadosEnVenta,name:"Culminados en venta"}]}]}}},methods:{generarContenidoTabla(){this.cargarLeads(),this.contenidoGenerado=!0},async cargarVendedores(){try{const e=await g.A.get("/get-vendedores");this.vendedores=e.data,console.log("✅ Vendedores cargados:",this.vendedores)}catch(e){console.error("❌ Error al cargar vendedores:",e)}},obtenerNombreVendedor(e){const a=this.vendedores.find((a=>a.id===parseInt(e)));return a?a.nombre:null},filtrarLeads(){console.log("🔎 Filtro de Vendedor:",this.filtroVendedor),console.log("🔎 Leads antes de filtrar:",this.leads),this.leadsFiltrados=this.leads.filter((e=>{console.log(`Lead ID: ${e.id}, Vendedor: ${e.vendedor_nombre}, Comparando con: ${this.filtroVendedor}`);const a=new Date(e.fecha_lead),o=this.filtroFechaDesde?new Date(this.filtroFechaDesde):null,t=this.filtroFechaHasta?new Date(this.filtroFechaHasta):null;return(!this.filtroMarca||e.marca_interes===this.filtroMarca)&&(!this.filtroVendedor||e.vendedor_nombre===this.obtenerNombreVendedor(this.filtroVendedor))&&(!this.filtroEstado||e.estatus===this.filtroEstado)&&(!this.filtroTestDrive||e.test_drive===this.filtroTestDrive)&&(!o||a>=o)&&(!t||a<=t)})),console.log("✅ Leads después de filtrar:",this.leadsFiltrados),this.calcularTotalizadores(),this.actualizarGrafico()},async cargarLeads(){try{const e=await g.A.get("/get-leads-gerente");this.leads=e.data,console.log("✅ Leads cargados para gerente:",this.leads),this.leads=this.leads.map((e=>({...e,seguimientos:e.seguimientos?e.seguimientos:"",vendedor_id:e.vendedor_id?e.vendedor_id:null}))),this.filtrarLeads(),this.calcularTotalizadores(),this.actualizarGrafico()}catch(e){console.error("❌ Error al cargar leads:",e)}},editarLead(e){this.leadEditando=e.id,this.leadSeleccionado={...e},e.vendedor_id?this.leadSeleccionado.vendedor_id=e.vendedor_id:this.leadSeleccionado.vendedor_id=null,e.seguimientos?this.leadSeleccionado.seguimientos=e.seguimientos:this.leadSeleccionado.seguimientos="",void 0!==e.precio_venta&&null!==e.precio_venta?this.leadSeleccionado.precio_venta=e.precio_venta:this.leadSeleccionado.precio_venta=0,console.log("🔎 Lead seleccionado para edición:",this.leadSeleccionado)},async guardarEdicion(){try{if(!this.usuarioId)return console.error("❌ Error: usuarioId no está definido."),void alert("Error: No se encontró el ID del usuario gerente.");if(!this.leadSeleccionado||!this.leadSeleccionado.id)return console.error("❌ Error: No hay un lead seleccionado o falta el ID."),void alert("Error: No hay un lead seleccionado para actualizar.");const e={...this.leadSeleccionado,usuario_id:this.usuarioId};console.log("📤 Enviando datos actualizados al backend:",e);const a=await g.A.post("/update-lead-gerente",e);alert(a.data.message||"Lead actualizado correctamente"),this.leadEditando=null,this.leadSeleccionado={},this.cargarLeads()}catch(e){console.error("❌ Error al guardar el lead:",e),alert("Error al actualizar el lead. Verifica la consola para más detalles.")}},cancelarEdicion(){this.leadEditando=null,this.leadSeleccionado={}},eliminarLead(e){confirm(`⚠️ ¿Estás seguro de que deseas eliminar el lead de ${e.nombres} ${e.apellidos}?`)&&confirm("Esta acción es irreversible. Confirma nuevamente para eliminar.")&&g.A.post("/delete-lead",{lead_id:e.id,usuario_id:this.usuarioId}).then((()=>{alert("Lead eliminado exitosamente"),this.cargarLeads()})).catch((e=>console.error("❌ Error al eliminar lead:",e)))},calcularTotalizadores(){this.totalLeadsAsignados=this.leadsFiltrados.length,this.totalLeadsNuevos=this.leadsFiltrados.filter((e=>"nuevo"===e.estatus)).length,this.totalLeadsEnSeguimiento=this.leadsFiltrados.filter((e=>"en seguimiento"===e.estatus)).length,this.totalLeadsCerrados=this.leadsFiltrados.filter((e=>"cerrado"===e.estatus)).length,this.totalLeadsCulminadosEnVenta=this.leadsFiltrados.filter((e=>"culmina en venta"===e.estatus)).length,this.totalLeadsAsignadosEstado=this.leadsFiltrados.filter((e=>"asignado"===e.estatus)).length,this.totalLeadsConTestDrive=this.leadsFiltrados.filter((e=>"Si"===e.test_drive)).length,this.filtroVendedor?g.A.get(`/tiempo-ultima-conexion?vendedor=${this.filtroVendedor}`).then((e=>{this.tiempoUltimaConexion=e.data.fecha_ultima_conexion,this.ultimaPuestaOnline=e.data.ultima_puesta_online})).catch((e=>{console.error("Error al obtener fecha desde la última conexión:",e),this.tiempoUltimaConexion="Error",this.ultimaPuestaOnline="Error"})):(this.tiempoUltimaConexion="N/A",this.ultimaPuestaOnline="N/A")},actualizarGrafico(){this.chartOptions.series[0].data=[{value:this.totalLeadsAsignados,name:"En sistema"},{value:this.totalLeadsNuevos,name:"Nuevo"},{value:this.totalLeadsEnSeguimiento,name:"En seguimiento"},{value:this.totalLeadsCerrados,name:"Cerrados"},{value:this.totalLeadsCulminadosEnVenta,name:"Culminados en venta"}]},guardarLead(e){g.A.post("/update-lead",e).then((()=>{alert("Lead actualizado")})).catch((e=>{console.error("Error al guardar el lead:",e)}))},exportarReporte(e){const a=this.leadsFiltrados.map((e=>({...e,asignado_a:this.filtroVendedor?parseInt(this.filtroVendedor):null})));g.A.post("/exportar-reporte-gerente",{leads:a,vendedor:this.filtroVendedor?parseInt(this.filtroVendedor):null,filtro_marca:this.filtroMarca||null,filtro_estado:this.filtroEstado||null,filtroTestDrive:this.filtroTestDrive||null,fechaDesde:this.filtroFechaDesde||null,fechaHasta:this.filtroFechaHasta||null,formato:e},{responseType:"blob"}).then((a=>{const o=window.URL.createObjectURL(new Blob([a.data])),t=document.createElement("a");t.href=o;const l="excel"===e?"xlsx":e;t.setAttribute("download",`reporte_leads.${l}`),document.body.appendChild(t),t.click(),document.body.removeChild(t)})).catch((e=>{console.error("Error al exportar reporte:",e)}))}},created(){this.usuarioId=parseInt(localStorage.getItem("id_usuario"))||null,this.usuarioId||console.error("❌ No se pudo obtener el usuario_id."),this.cargarVendedores(),this.cargarLeads()}};const it=(0,i.A)(st,[["render",rt],["__scopeId","data-v-f7570ca8"]]);var dt=it;const ct={id:"app",class:"container mt-4"},ut={class:"text-center mb-4"},mt={key:0,class:"row text-center mb-4"},ht={class:"card shadow-sm total-card"},pt={class:"card-body"},vt={class:"card-title",style:{"font-size":"0.9em"}},Lt={class:"card-text fs-5 fw-bold"},bt={class:"row text-center mb-4"},kt={class:"col-md-4"},ft={class:"card shadow-sm total-card bg-light"},gt={class:"card-body"},Ct={class:"card-text fs-5 fw-bold text-primary"},Et={class:"col-md-4"},_t={class:"card shadow-sm total-card bg-light"},yt={class:"card-body"},xt={class:"card-text fs-5 fw-bold text-success"},At={class:"col-md-4"},Vt={class:"card shadow-sm total-card bg-light"},St={class:"card-body"},It={class:"card-text fs-5 fw-bold text-danger"},Nt={class:"row mb-4"},Ft={class:"col-md-6"},Tt={class:"col-md-6"},wt={key:1,class:"text-center mb-4"},Dt={class:"position-indicator"},Rt={key:2,class:"form-leads"},Xt={class:"row g-3"},Ut={class:"form-label"},Ot=["onUpdate:modelValue","disabled"],Mt={class:"col-4"},Pt=["disabled"],zt={class:"col-4"},Gt=["disabled"],Wt={class:"col-4"},jt=["value"],Jt={class:"row g-3 mt-3"},$t={class:"col-12"},Ht=["disabled"],Kt={class:"text-center mt-4"},qt=["disabled"],Bt={key:0},Qt={key:1},Yt={class:"text-center mt-4"},Zt={key:3,class:"text-center mt-4"},el={key:4,class:"mt-4"},al={class:"table table-bordered"},ol={key:0},tl={key:1},ll={class:"table table-bordered"},nl={key:0},rl={key:1};function sl(e,a,o,n,r,s){return(0,l.uX)(),(0,l.CE)("div",ct,[a[35]||(a[35]=(0,l.Lk)("h1",{class:"text-center mb-4"},"Gestión de Leads",-1)),(0,l.Lk)("div",ut,[(0,l.Lk)("button",{onClick:a[0]||(a[0]=(...e)=>s.toggleEnLinea&&s.toggleEnLinea(...e)),class:(0,m.C4)(["btn","btn-toggle",r.enLinea?"btn-success":"btn-danger"])},(0,m.v_)(r.enLinea?"En línea":"Fuera de línea"),3)]),null!==r.totalLeads?((0,l.uX)(),(0,l.CE)("div",mt,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(r.totalTitles,((e,a)=>((0,l.uX)(),(0,l.CE)("div",{class:"col mb-4",key:a},[(0,l.Lk)("div",ht,[(0,l.Lk)("div",pt,[(0,l.Lk)("h5",vt,(0,m.v_)(e),1),(0,l.Lk)("p",Lt,(0,m.v_)(s.totalValues[a]),1)])])])))),128))])):(0,l.Q3)("",!0),(0,l.Lk)("div",bt,[(0,l.Lk)("div",kt,[(0,l.Lk)("div",ft,[(0,l.Lk)("div",gt,[a[14]||(a[14]=(0,l.Lk)("h5",{class:"card-title"},"💵 Proyectado",-1)),(0,l.Lk)("p",Ct,(0,m.v_)(s.formatCurrency(s.totalProyectado)),1)])])]),(0,l.Lk)("div",Et,[(0,l.Lk)("div",_t,[(0,l.Lk)("div",yt,[a[15]||(a[15]=(0,l.Lk)("h5",{class:"card-title"},"✅ Vendido",-1)),(0,l.Lk)("p",xt,(0,m.v_)(s.formatCurrency(s.totalVentas)),1)])])]),(0,l.Lk)("div",At,[(0,l.Lk)("div",Vt,[(0,l.Lk)("div",St,[a[16]||(a[16]=(0,l.Lk)("h5",{class:"card-title"},"❌ Perdido",-1)),(0,l.Lk)("p",It,(0,m.v_)(s.formatCurrency(s.totalPerdidos)),1)])])])]),(0,l.Lk)("div",Nt,[(0,l.Lk)("div",Ft,[a[18]||(a[18]=(0,l.Lk)("label",{class:"form-label"},"Filtrar por Estatus",-1)),(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":a[1]||(a[1]=e=>r.filtroEstatus=e),onChange:a[2]||(a[2]=(...e)=>s.filtrarLeads&&s.filtrarLeads(...e)),class:"form-select"},a[17]||(a[17]=[(0,l.Fv)('<option value="" data-v-16bc8c24>Todos</option><option value="asignado" data-v-16bc8c24>Asignado</option><option value="en seguimiento" data-v-16bc8c24>En Seguimiento</option><option value="cerrado" data-v-16bc8c24>Cerrado</option><option value="culmina en venta" data-v-16bc8c24>Culmina en Venta</option>',5)]),544),[[t.u1,r.filtroEstatus]])]),(0,l.Lk)("div",Tt,[a[20]||(a[20]=(0,l.Lk)("label",{class:"form-label"},"Filtrar por Test Drive",-1)),(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":a[3]||(a[3]=e=>r.filtroTestDrive=e),onChange:a[4]||(a[4]=(...e)=>s.filtrarLeads&&s.filtrarLeads(...e)),class:"form-select"},a[19]||(a[19]=[(0,l.Lk)("option",{value:""},"Todos",-1),(0,l.Lk)("option",{value:"Si"},"Si",-1),(0,l.Lk)("option",{value:"No"},"No",-1)]),544),[[t.u1,r.filtroTestDrive]])])]),r.leadActual?((0,l.uX)(),(0,l.CE)("div",wt,[(0,l.Lk)("button",{onClick:a[5]||(a[5]=(...e)=>s.leadAnterior&&s.leadAnterior(...e)),class:"btn btn-outline-primary me-2"},"← Anterior"),(0,l.Lk)("span",Dt,(0,m.v_)(r.currentIndex+1)+" de "+(0,m.v_)(r.leads.length),1),(0,l.Lk)("button",{onClick:a[6]||(a[6]=(...e)=>s.leadSiguiente&&s.leadSiguiente(...e)),class:"btn btn-outline-primary"},"Siguiente →")])):(0,l.Q3)("",!0),r.leadActual?((0,l.uX)(),(0,l.CE)("div",Rt,[(0,l.Lk)("div",Xt,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(r.leadLabels,((e,a)=>((0,l.uX)(),(0,l.CE)("div",{key:a,class:"col-md-4"},[(0,l.Lk)("label",Ut,(0,m.v_)(e.text),1),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":a=>r.leadActual[e.field]=a,disabled:!r.editMode,class:"form-control"},null,8,Ot),[[t.Jo,r.leadActual[e.field]]])])))),128)),(0,l.Lk)("div",Mt,[a[22]||(a[22]=(0,l.Lk)("label",{class:"form-label"},"Estatus",-1)),(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":a[7]||(a[7]=e=>r.leadActual.estatus=e),disabled:!r.editMode,class:"form-select"},a[21]||(a[21]=[(0,l.Lk)("option",{value:"asignado"},"Asignado",-1),(0,l.Lk)("option",{value:"en seguimiento"},"En Seguimiento",-1),(0,l.Lk)("option",{value:"cerrado"},"Cerrado",-1),(0,l.Lk)("option",{value:"culmina en venta"},"Culmina en Venta",-1)]),8,Pt),[[t.u1,r.leadActual.estatus]])]),(0,l.Lk)("div",zt,[a[24]||(a[24]=(0,l.Lk)("label",{class:"form-label"},"Test Drive",-1)),(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":a[8]||(a[8]=e=>r.leadActual.test_drive=e),disabled:!r.editMode,class:"form-select"},a[23]||(a[23]=[(0,l.Lk)("option",{value:"No"},"No",-1),(0,l.Lk)("option",{value:"Si"},"Si",-1)]),8,Gt),[[t.u1,r.leadActual.test_drive]])]),(0,l.Lk)("div",Wt,[a[25]||(a[25]=(0,l.Lk)("label",{class:"form-label"},"Precio de Venta",-1)),r.editMode?(0,l.bo)(((0,l.uX)(),(0,l.CE)("input",{key:0,type:"number","onUpdate:modelValue":a[9]||(a[9]=e=>r.leadActual.precio_venta=e),class:"form-control"},null,512)),[[t.Jo,r.leadActual.precio_venta,void 0,{number:!0}]]):((0,l.uX)(),(0,l.CE)("input",{key:1,type:"text",value:s.formatCurrency(r.leadActual.precio_venta),class:"form-control",disabled:""},null,8,jt))])]),(0,l.Lk)("div",Jt,[(0,l.Lk)("div",$t,[a[26]||(a[26]=(0,l.Lk)("label",{class:"form-label"},"Seguimientos",-1)),(0,l.bo)((0,l.Lk)("textarea",{"onUpdate:modelValue":a[10]||(a[10]=e=>r.leadActual.seguimientos=e),disabled:!r.editMode,class:"form-control"},null,8,Ht),[[t.Jo,r.leadActual.seguimientos]])])]),(0,l.Lk)("div",Kt,[(0,l.Lk)("button",{onClick:a[11]||(a[11]=(...e)=>s.consultarRNE&&s.consultarRNE(...e)),disabled:r.loading,class:(0,m.C4)(["btn",r.loading?"btn-secondary":"btn-info"])},[r.loading?((0,l.uX)(),(0,l.CE)("span",Bt,a[27]||(a[27]=[(0,l.Lk)("i",{class:"spinner-border spinner-border-sm"},null,-1),(0,l.eW)(" Consultando... ")]))):((0,l.uX)(),(0,l.CE)("span",Qt,"Consulta al RNE"))],10,qt)]),(0,l.Lk)("div",Yt,[r.editMode?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.CE)("button",{key:0,onClick:a[12]||(a[12]=(...e)=>s.habilitarEdicion&&s.habilitarEdicion(...e)),class:"btn btn-primary"},"Editar")),r.editMode?((0,l.uX)(),(0,l.CE)("button",{key:1,onClick:a[13]||(a[13]=(...e)=>s.guardarCambios&&s.guardarCambios(...e)),class:"btn btn-success"},"Guardar")):(0,l.Q3)("",!0)])])):((0,l.uX)(),(0,l.CE)("div",Zt,a[28]||(a[28]=[(0,l.Lk)("p",{class:"text-muted"},"No hay leads asignados actualmente.",-1)]))),r.resultadosRNE?((0,l.uX)(),(0,l.CE)("div",el,[a[33]||(a[33]=(0,l.Lk)("h5",{class:"text-center"},"Resultado para Teléfono",-1)),(0,l.Lk)("table",al,[a[30]||(a[30]=(0,l.Lk)("thead",null,[(0,l.Lk)("tr",null,[(0,l.Lk)("th",null,"Número Telefónico"),(0,l.Lk)("th",null,"Acepta ser contactado por:"),(0,l.Lk)("th",null,"Tipo"),(0,l.Lk)("th",null,"Fecha Registro en RNE")])],-1)),(0,l.Lk)("tbody",null,[r.resultadosRNE.telefono?((0,l.uX)(),(0,l.CE)("tr",ol,[(0,l.Lk)("td",null,(0,m.v_)(r.resultadosRNE.telefono.llave),1),(0,l.Lk)("td",null,[(0,l.Lk)("ul",null,[(0,l.Lk)("li",null,"SMS: "+(0,m.v_)(r.resultadosRNE.telefono.opcionesContacto.sms?"Sí":"No"),1),(0,l.Lk)("li",null,"Aplicación: "+(0,m.v_)(r.resultadosRNE.telefono.opcionesContacto.aplicacion?"Sí":"No"),1),(0,l.Lk)("li",null,"Llamada: "+(0,m.v_)(r.resultadosRNE.telefono.opcionesContacto.llamada?"Sí":"No"),1)])]),(0,l.Lk)("td",null,(0,m.v_)(r.resultadosRNE.telefono.tipo),1),(0,l.Lk)("td",null,(0,m.v_)(r.resultadosRNE.telefono.fechaCreacion),1)])):((0,l.uX)(),(0,l.CE)("tr",tl,a[29]||(a[29]=[(0,l.Lk)("td",{colspan:"4",class:"text-center"},"NO EXISTE REGISTRO PARA ESE NÚMERO TELEFÓNICO",-1)])))])]),a[34]||(a[34]=(0,l.Lk)("h5",{class:"text-center mt-4"},"Resultado para Correo",-1)),(0,l.Lk)("table",ll,[a[32]||(a[32]=(0,l.Lk)("thead",null,[(0,l.Lk)("tr",null,[(0,l.Lk)("th",null,"Correo"),(0,l.Lk)("th",null,"Acepta ser contactado por:"),(0,l.Lk)("th",null,"Fecha Registro en RNE")])],-1)),(0,l.Lk)("tbody",null,[r.resultadosRNE.correo?((0,l.uX)(),(0,l.CE)("tr",nl,[(0,l.Lk)("td",null,(0,m.v_)(r.resultadosRNE.correo.llave),1),(0,l.Lk)("td",null,[(0,l.Lk)("ul",null,[(0,l.Lk)("li",null,"Correo Electrónico: "+(0,m.v_)(r.resultadosRNE.correo.opcionesContacto.correo_electronico?"Sí":"No"),1),(0,l.Lk)("li",null,"Aplicaciones: "+(0,m.v_)(r.resultadosRNE.correo.opcionesContacto.aplicacion?"Sí":"No"),1)])]),(0,l.Lk)("td",null,(0,m.v_)(r.resultadosRNE.correo.fechaCreacion),1)])):((0,l.uX)(),(0,l.CE)("tr",rl,a[31]||(a[31]=[(0,l.Lk)("td",{colspan:"3",class:"text-center"},"NO EXISTE REGISTRO PARA ESE CORREO",-1)])))])])])):(0,l.Q3)("",!0)])}o(8872);var il={data(){return{leads:[],leadsFiltrados:[],currentIndex:0,leadActual:null,resultadosRNE:null,loading:!1,editMode:!1,totalLeads:0,totalLeadsAsignado:0,totalLeadsEnSeguimiento:0,totalLeadsCerrados:0,totalLeadsCulminadosEnVenta:0,totalTestDrive:0,enLinea:!1,vendedorId:null,filtroEstatus:"",filtroTestDrive:"",leadLabels:[{text:"Nombres",field:"nombres"},{text:"Apellidos",field:"apellidos"},{text:"Teléfono",field:"telefono"},{text:"Dirección",field:"direccion"},{text:"Ciudad",field:"ciudad"},{text:"Correo",field:"correo"},{text:"Fecha Lead",field:"fecha_lead"},{text:"Origen Lead",field:"origen_lead"},{text:"Marca de Interés",field:"marca_interes"},{text:"Modelo Interesado",field:"modelo_interesado"}],totalTitles:["Leads del Vendedor","Asignado","En Seguimiento","Cerrados","Cierre en Venta","Con Test Drive"]}},computed:{totalValues(){return[this.totalLeads,this.totalLeadsAsignado,this.totalLeadsEnSeguimiento,this.totalLeadsCerrados,this.totalLeadsCulminadosEnVenta,this.totalTestDrive]},totalVentas(){return this.leads.filter((e=>"culmina en venta"===e.estatus)).reduce(((e,a)=>e+(a.precio_venta||0)),0)},totalPerdidos(){return this.leads.filter((e=>"cerrado"===e.estatus)).reduce(((e,a)=>e+(a.precio_venta||0)),0)},totalProyectado(){return this.leads.reduce(((e,a)=>e+(a.precio_venta||0)),0)}},methods:{formatCurrency(e){return e?new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0,maximumFractionDigits:0}).format(e):"$0"},iniciarPing(){this.pingInterval=setInterval((()=>{this.enLinea&&g.A.post("/update-vendedor-estado",{vendedor_id:this.vendedorId,estado:!0}).then((()=>{console.log("Ping enviado para mantener el estado en línea.")})).catch((e=>{console.error("Error en el ping de estado en línea:",e)}))}),18e5)},detenerPing(){this.pingInterval&&(clearInterval(this.pingInterval),this.pingInterval=null)},obtenerIdConcesionario(e){if(!this.listaConcesionarios||0===this.listaConcesionarios.length)return console.error("⚠️ Error: Lista de concesionarios aún no está disponible."),null;const a=this.listaConcesionarios.find((a=>a.nombre_concesionario===e));return a?a.id:null},consultarLeads(){if(this.vendedorId=Number(localStorage.getItem("vendedor_actual")),!this.vendedorId)return console.warn("⚠️ vendedor_actual no disponible todavía. Reintentando..."),void setTimeout(this.consultarLeads,500);g.A.get(`/get-leads-vendedor?vendedor=${this.vendedorId}`).then((e=>{console.log("📥 Leads recibidos:",e.data),this.leads=e.data,this.leadsFiltrados=[...this.leads],this.leadsFiltrados.length&&(this.leadActual=this.leadsFiltrados[this.currentIndex]),this.updateTotalizadores()})).catch((e=>{console.error("Error al obtener los leads:",e)}))},formatearFechaColombia(e){if(!e)return"";const a={year:"numeric",month:"2-digit",day:"2-digit"},o=new Date(e);return o.toLocaleDateString("es-CO",a)},desformatearFechaColombia(e){if(!e||e.includes("undefined"))return console.warn("⚠️ Fecha inválida detectada en el frontend:",e),null;const[a,o,t]=e.split("/");return`${t}-${o}-${a}`},enviarNotificacionCorreo(e,a,o){g.A.post("/test-email",{destinatario:e,asunto:a,mensaje:o}).then((()=>{console.log("Notificación de correo enviada correctamente.")})).catch((e=>{console.error("Error al enviar la notificación de correo:",e)}))},updateTotalizadores(){this.totalLeads=this.leads.length,this.totalLeadsAsignado=this.leads.filter((e=>"asignado"===e.estatus)).length,this.totalLeadsEnSeguimiento=this.leads.filter((e=>"en seguimiento"===e.estatus)).length,this.totalLeadsCerrados=this.leads.filter((e=>"cerrado"===e.estatus)).length,this.totalLeadsCulminadosEnVenta=this.leads.filter((e=>"culmina en venta"===e.estatus)).length,this.totalTestDrive=this.leads.filter((e=>"Si"===e.test_drive)).length},filtrarLeads(){this.leadsFiltrados=this.leads.filter((e=>{const a=!this.filtroEstatus||e.estatus===this.filtroEstatus,o=!this.filtroTestDrive||e.test_drive===this.filtroTestDrive;return a&&o})),this.currentIndex=0,this.leadActual=this.leadsFiltrados[this.currentIndex]||null},async consultarRNE(){if(!this.leadActual)return;const{telefono:e,correo:a}=this.leadActual,o=localStorage.getItem("vendedor_actual");this.loading=!0;try{const t=await g.A.post("/consultar-rne",{telefono:e,correo:a,vendedor_id:o});this.resultadosRNE=t.data}catch(t){console.error("Error al consultar el RNE:",t),alert("Error al consultar el RNE.")}finally{this.loading=!1}},leadAnterior(){this.resultadosRNE=null,this.currentIndex>0&&(this.currentIndex--,this.leadActual=this.leadsFiltrados[this.currentIndex])},leadSiguiente(){this.resultadosRNE=null,this.currentIndex<this.leadsFiltrados.length-1&&(this.currentIndex++,this.leadActual=this.leadsFiltrados[this.currentIndex])},habilitarEdicion(){this.editMode=!0},cargarConcesionarios(){g.A.get("/get-concesionarios").then((e=>{this.listaConcesionarios=e.data,console.log("✅ Lista de concesionarios cargada:",this.listaConcesionarios)})).catch((e=>{console.error("❌ Error al obtener la lista de concesionarios:",e)}))},guardarCambios(){if(console.log("📌  Verificando lista de concesionarios antes de guardar:",this.listaConcesionarios),!this.listaConcesionarios||0===this.listaConcesionarios.length)return void alert("⚠️ Error: No se puede guardar aún, la lista de concesionarios no ha cargado. Intente nuevamente en unos segundos.");const e={...this.leadActual,concesionario_id:this.obtenerIdConcesionario(this.leadActual.concesionario_id),fecha_lead:this.desformatearFechaColombia(this.leadActual.fecha_lead),usuario_id:this.vendedorId};g.A.post("/update-lead",e).then((()=>{alert("Cambios guardados exitosamente"),this.editMode=!1;const e=this.leads.findIndex((e=>e.id===this.leadActual.id));-1!==e&&this.leads.splice(e,1,{...this.leadActual}),this.updateTotalizadores(),this.consultarLeads(),setTimeout((()=>{this.asignarNuevoLead()}),200)})).catch((e=>{console.error("Error al guardar los cambios:",e.response?e.response.data:e)}))},asignarNuevoLead(){if(!this.enLinea)return void console.log("El vendedor está fuera de línea. No se asignará un nuevo lead.");console.log("Solicitando asignación de un nuevo lead...");const e=this.leads.find((e=>"asignado"===e.estatus));e?console.log("El vendedor ya tiene un lead asignado. No se solicitará otro lead."):g.A.post("/asignar-lead",{vendedor_id:this.vendedorId}).then((e=>{console.log("Respuesta del backend:",e.data);const a=e.data.lead_asignado;a?(a.estatus="asignado",a.test_drive=a.test_drive||"No",this.leads.unshift(a),this.currentIndex=0,this.leadActual=this.leads[this.currentIndex],this.updateTotalizadores(),alert("¡Nuevo lead asignado! Revisa los detalles del lead en la lista."),console.log("Nuevo lead recibido:",a)):console.log("No hay nuevos leads para asignar en este momento.")})).catch((e=>{console.error("Error al asignar el nuevo lead:",e.response?e.response.data:e)}))},toggleEnLinea(){this.enLinea=!this.enLinea,g.A.post("/update-vendedor-estado",{vendedor_id:this.vendedorId,estado:this.enLinea}).then((()=>{if(console.log("Estado del vendedor "+(this.enLinea?"En línea":"Fuera de línea")),this.enLinea){const e=this.leads.find((e=>"asignado"===e.estatus));e?alert("Ya tiene un lead asignado. Por favor, termine de trabajar en ese lead antes de recibir uno nuevo."):this.asignarNuevoLead()}})).catch((e=>console.error("Error al actualizar el estado del vendedor:",e)))},marcarFueraDeLinea(){this.enLinea&&g.A.post("/update-vendedor-estado",{vendedor_id:this.vendedorId,estado:!1}).then((()=>{console.log("Vendedor marcado como fuera de línea antes de cerrar la ventana.")})).catch((e=>{console.error("Error al marcar al vendedor como fuera de línea:",e)}))}},created(){this.consultarLeads(),this.cargarConcesionarios(),window.addEventListener("beforeunload",this.marcarFueraDeLinea),this.iniciarPing()},beforeUnmount(){window.removeEventListener("beforeunload",this.marcarFueraDeLinea),this.detenerPing()},components:{}};const dl=(0,i.A)(il,[["render",sl],["__scopeId","data-v-16bc8c24"]]);var cl=dl;const ul={class:"container mt-4"},ml={class:"navigation-buttons text-center mt-4"},hl={class:"text-center mt-4"},pl={class:"row g-3 mb-4"},vl={class:"col-md-4"},Ll=["value"],bl={class:"col-md-4"},kl={class:"col-md-4"},fl={class:"table-responsive"},gl={class:"table table-bordered table-striped"};function Cl(e,a,o,n,r,s){const i=(0,l.g2)("BotonesGlobales");return(0,l.uX)(),(0,l.CE)("div",ul,[a[10]||(a[10]=(0,l.Lk)("h1",{class:"text-center mb-4"},"Logs de Auditoría",-1)),(0,l.Lk)("div",ml,[(0,l.bF)(i)]),(0,l.Lk)("div",hl,[(0,l.Lk)("button",{class:"btn btn-info",onClick:a[0]||(a[0]=(...e)=>s.exportLogs&&s.exportLogs(...e))},"Exportar a CSV")]),(0,l.Lk)("div",pl,[(0,l.Lk)("div",vl,[a[5]||(a[5]=(0,l.Lk)("label",{for:"filterUser",class:"form-label"},"Filtrar por usuario:",-1)),(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":a[1]||(a[1]=e=>r.filterUser=e),id:"filterUser",class:"form-select"},[a[4]||(a[4]=(0,l.Lk)("option",{value:""},"Todos",-1)),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(r.users,(e=>((0,l.uX)(),(0,l.CE)("option",{key:e.id,value:e.id},(0,m.v_)(e.name),9,Ll)))),128))],512),[[t.u1,r.filterUser]])]),(0,l.Lk)("div",bl,[a[7]||(a[7]=(0,l.Lk)("label",{for:"filterAction",class:"form-label"},"Filtrar por acción:",-1)),(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":a[2]||(a[2]=e=>r.filterAction=e),id:"filterAction",class:"form-select"},a[6]||(a[6]=[(0,l.Lk)("option",{value:""},"Todos",-1),(0,l.Lk)("option",{value:"Creación"},"Creación",-1),(0,l.Lk)("option",{value:"Actualización"},"Actualización",-1),(0,l.Lk)("option",{value:"Eliminación"},"Eliminación",-1)]),512),[[t.u1,r.filterAction]])]),(0,l.Lk)("div",kl,[a[8]||(a[8]=(0,l.Lk)("label",{for:"filterDate",class:"form-label"},"Filtrar por fecha:",-1)),(0,l.bo)((0,l.Lk)("input",{type:"date","onUpdate:modelValue":a[3]||(a[3]=e=>r.filterDate=e),id:"filterDate",class:"form-control"},null,512),[[t.Jo,r.filterDate]])])]),(0,l.Lk)("div",fl,[(0,l.Lk)("table",gl,[a[9]||(a[9]=(0,l.Lk)("thead",{class:"table-dark"},[(0,l.Lk)("tr",null,[(0,l.Lk)("th",null,"ID"),(0,l.Lk)("th",null,"Fecha y Hora"),(0,l.Lk)("th",null,"Usuario"),(0,l.Lk)("th",null,"Acción"),(0,l.Lk)("th",null,"Campo Modificado"),(0,l.Lk)("th",null,"Valor Anterior"),(0,l.Lk)("th",null,"Valor Nuevo"),(0,l.Lk)("th",null,"Comentarios")])],-1)),(0,l.Lk)("tbody",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(s.filteredLogs,(e=>((0,l.uX)(),(0,l.CE)("tr",{key:e.id},[(0,l.Lk)("td",null,(0,m.v_)(e.id),1),(0,l.Lk)("td",null,(0,m.v_)(e.fecha_hora),1),(0,l.Lk)("td",null,(0,m.v_)(e.usuario),1),(0,l.Lk)("td",null,(0,m.v_)(e.accion),1),(0,l.Lk)("td",null,(0,m.v_)(e.campo_modificado||"-"),1),(0,l.Lk)("td",null,(0,m.v_)(e.valor_anterior||"-"),1),(0,l.Lk)("td",null,(0,m.v_)(e.valor_nuevo||"-"),1),(0,l.Lk)("td",null,(0,m.v_)(e.comentarios),1)])))),128))])])])])}var El={data(){return{logs:[],users:[],filterUser:"",filterAction:"",filterDate:""}},computed:{filteredLogs(){return this.logs.filter((e=>{const a=!this.filterUser||e.usuario_id===Number(this.filterUser),o=!this.filterAction||e.accion===this.filterAction,t=!this.filterDate||e.fecha_hora.split(" ")[0]===this.filterDate;return a&&o&&t}))}},methods:{fetchLogs(){g.A.get("/get-logs").then((e=>{this.logs=e.data.logs,this.users=e.data.users})).catch((e=>{console.error("Error al obtener los logs:",e),alert("No se pudieron cargar los logs de auditoría.")}))},exportLogs(){const e=[["ID","Fecha y Hora","Usuario","Acción","Campo Modificado","Valor Anterior","Valor Nuevo","Comentarios"],...this.filteredLogs.map((e=>[e.id,e.fecha_hora,e.usuario,e.accion,e.campo_modificado||"-",e.valor_anterior||"-",e.valor_nuevo||"-",e.comentarios]))].map((e=>e.join(";"))).join("\n"),a=new Blob([e],{type:"text/csv;charset=utf-8;"}),o=document.createElement("a");o.href=URL.createObjectURL(a),o.download="logs_auditoria.csv",o.click()}},created(){this.fetchLogs()},components:{BotonesGlobales:q.A}};const _l=(0,i.A)(El,[["render",Cl],["__scopeId","data-v-486e758a"]]);var yl=_l;const xl={class:"container mt-5"},Al={class:"mt-4"},Vl={class:"form-check mb-3"},Sl={class:"mb-3"},Il=["disabled"],Nl={class:"form-check mb-3"},Fl={key:0},Tl={class:"mb-3"},wl={class:"mb-3"},Dl={class:"mb-3"},Rl={class:"text-center"};function Xl(e,a,o,n,r,s){return(0,l.uX)(),(0,l.CE)("div",xl,[a[13]||(a[13]=(0,l.Lk)("h1",{class:"text-center"},"Parametrización General",-1)),(0,l.Lk)("div",Al,[(0,l.Lk)("div",Vl,[(0,l.bo)((0,l.Lk)("input",{class:"form-check-input",type:"checkbox",id:"enviarCorreo","onUpdate:modelValue":a[0]||(a[0]=e=>r.configuracion.enviar_correo=e)},null,512),[[t.lH,r.configuracion.enviar_correo]]),a[7]||(a[7]=(0,l.Lk)("label",{class:"form-check-label",for:"enviarCorreo"}," Habilitar envío de correos electrónicos ",-1))]),(0,l.Lk)("div",Sl,[a[8]||(a[8]=(0,l.Lk)("label",{for:"destinatarios",class:"form-label"},"Destinatarios",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text",id:"destinatarios","onUpdate:modelValue":a[1]||(a[1]=e=>r.configuracion.destinatarios=e),class:"form-control",placeholder:"Ingrese correos separados por coma",disabled:!r.configuracion.enviar_correo},null,8,Il),[[t.Jo,r.configuracion.destinatarios]])]),(0,l.Lk)("div",Nl,[(0,l.bo)((0,l.Lk)("input",{class:"form-check-input",type:"checkbox",id:"habilitarWebhook","onUpdate:modelValue":a[2]||(a[2]=e=>r.configuracion.habilitar_webhook=e)},null,512),[[t.lH,r.configuracion.habilitar_webhook]]),a[9]||(a[9]=(0,l.Lk)("label",{class:"form-check-label",for:"habilitarWebhook"}," Habilitar envío de Webhooks ",-1))]),r.configuracion.habilitar_webhook?((0,l.uX)(),(0,l.CE)("div",Fl,[(0,l.Lk)("div",Tl,[a[10]||(a[10]=(0,l.Lk)("label",{for:"webhook_interno",class:"form-label"},"Webhook Interno",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text","onUpdate:modelValue":a[3]||(a[3]=e=>r.configuracion.webhook_interno=e),class:"form-control"},null,512),[[t.Jo,r.configuracion.webhook_interno]])]),(0,l.Lk)("div",wl,[a[11]||(a[11]=(0,l.Lk)("label",{for:"webhook_make",class:"form-label"},"Webhook Make",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text","onUpdate:modelValue":a[4]||(a[4]=e=>r.configuracion.webhook_make=e),class:"form-control"},null,512),[[t.Jo,r.configuracion.webhook_make]])]),(0,l.Lk)("div",Dl,[a[12]||(a[12]=(0,l.Lk)("label",{for:"webhook_zapier",class:"form-label"},"Webhook Zapier",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text","onUpdate:modelValue":a[5]||(a[5]=e=>r.configuracion.webhook_zapier=e),class:"form-control"},null,512),[[t.Jo,r.configuracion.webhook_zapier]])])])):(0,l.Q3)("",!0),(0,l.Lk)("div",Rl,[(0,l.Lk)("button",{onClick:a[6]||(a[6]=(...e)=>s.guardarConfiguracion&&s.guardarConfiguracion(...e)),class:"btn btn-primary"},"Guardar Configuración")])])])}var Ul={data(){return{configuracion:{enviar_correo:!1,destinatarios:"",habilitar_webhook:!1,webhook_interno:"",webhook_make:"",webhook_zapier:""}}},mounted(){this.cargarConfiguracion()},methods:{async cargarConfiguracion(){try{const e=await g.A.get("/get-configuracion-general");this.configuracion=e.data}catch(e){console.error("Error al cargar la configuración:",e)}},async guardarConfiguracion(){try{await g.A.post("/update-configuracion-general",this.configuracion),alert("Configuración guardada correctamente.")}catch(e){console.error("Error al guardar la configuración:",e),alert("Ocurrió un error al guardar la configuración.")}}}};const Ol=(0,i.A)(Ul,[["render",Xl]]);var Ml=Ol;const Pl={id:"test-drive-form",class:"container mt-4"},zl={class:"form-test-drive"},Gl={key:0,class:"text-center mt-4 alert alert-success"},Wl={key:1},jl={class:"row g-3"},Jl={class:"col-md-6"},$l={class:"col-md-6"},Hl={class:"col-md-4"},Kl={key:0,class:"text-danger"},ql={class:"col-md-4"},Bl={key:0,class:"text-danger"},Ql={class:"col-md-4"},Yl={class:"col-md-4"},Zl=["value"],en={class:"col-md-4"},an=["value"],on={class:"col-md-4"},tn=["value"],ln={class:"col-md-8"},nn={class:"form-check form-check-inline"},rn={class:"form-check form-check-inline"},sn={class:"text-muted d-block mt-1"},dn=["href"],cn={class:"text-center mt-4"},un=["disabled"],mn={key:0},hn={key:1};function pn(e,a,o,n,r,s){return(0,l.uX)(),(0,l.CE)("div",Pl,[a[32]||(a[32]=(0,l.Lk)("div",{class:"header-image"},[(0,l.Lk)("img",{src:"/images/cabezote.jpg",alt:"Cabezote"})],-1)),a[33]||(a[33]=(0,l.Lk)("h1",{class:"text-center mt-5 mb-4"},"Formulario de Agendamiento Test Drive",-1)),(0,l.Lk)("div",zl,[r.mensajeConfirmacion?((0,l.uX)(),(0,l.CE)("div",Gl,[(0,l.eW)((0,m.v_)(r.mensajeConfirmacion)+" ",1),(0,l.Lk)("p",null,"Esta página se cerrará en "+(0,m.v_)(r.contador)+" segundos...",1)])):((0,l.uX)(),(0,l.CE)("div",Wl,[(0,l.Lk)("div",jl,[(0,l.Lk)("div",Jl,[a[16]||(a[16]=(0,l.Lk)("label",{for:"nombres",class:"form-label fw-bold"},"Nombres",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=e=>r.lead.nombres=e),class:"form-control",required:""},null,512),[[t.Jo,r.lead.nombres]])]),(0,l.Lk)("div",$l,[a[17]||(a[17]=(0,l.Lk)("label",{for:"apellidos",class:"form-label fw-bold"},"Apellidos",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text","onUpdate:modelValue":a[1]||(a[1]=e=>r.lead.apellidos=e),class:"form-control",required:""},null,512),[[t.Jo,r.lead.apellidos]])]),(0,l.Lk)("div",Hl,[a[18]||(a[18]=(0,l.Lk)("label",{for:"identificacion",class:"form-label fw-bold"},"Identificación",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text","onUpdate:modelValue":a[2]||(a[2]=e=>r.lead.identificacion=e),class:"form-control",required:"",onInput:a[3]||(a[3]=e=>s.validarNumeros("identificacion"))},null,544),[[t.Jo,r.lead.identificacion]]),r.errores.identificacion?((0,l.uX)(),(0,l.CE)("small",Kl,"Debe ingresar solo números.")):(0,l.Q3)("",!0)]),(0,l.Lk)("div",ql,[a[19]||(a[19]=(0,l.Lk)("label",{for:"telefono",class:"form-label fw-bold"},"Celular",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text","onUpdate:modelValue":a[4]||(a[4]=e=>r.lead.telefono=e),class:"form-control",required:"",onInput:a[5]||(a[5]=e=>s.validarNumeros("telefono"))},null,544),[[t.Jo,r.lead.telefono]]),r.errores.telefono?((0,l.uX)(),(0,l.CE)("small",Bl,"Debe ingresar solo números.")):(0,l.Q3)("",!0)]),(0,l.Lk)("div",Ql,[a[20]||(a[20]=(0,l.Lk)("label",{for:"correo",class:"form-label fw-bold"},"Correo Electrónico",-1)),(0,l.bo)((0,l.Lk)("input",{type:"email","onUpdate:modelValue":a[6]||(a[6]=e=>r.lead.correo=e),class:"form-control",required:""},null,512),[[t.Jo,r.lead.correo]])]),(0,l.Lk)("div",Yl,[a[22]||(a[22]=(0,l.Lk)("label",{for:"ciudad",class:"form-label fw-bold"},"Ciudad",-1)),(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":a[7]||(a[7]=e=>r.lead.ciudad=e),class:"form-select",required:""},[a[21]||(a[21]=(0,l.Lk)("option",{disabled:"",value:""},"Selecciona una Ciudad",-1)),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(r.ciudades,(e=>((0,l.uX)(),(0,l.CE)("option",{key:e,value:e},(0,m.v_)(e),9,Zl)))),128))],512),[[t.u1,r.lead.ciudad]])]),(0,l.Lk)("div",en,[a[24]||(a[24]=(0,l.Lk)("label",{for:"marca",class:"form-label fw-bold"},"Marca de Interés",-1)),(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":a[8]||(a[8]=e=>r.lead.marca_interes=e),class:"form-select"},[a[23]||(a[23]=(0,l.Lk)("option",{disabled:"",value:""},"Selecciona una marca",-1)),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(r.marcasDisponibles,(e=>((0,l.uX)(),(0,l.CE)("option",{key:e,value:e},(0,m.v_)(e),9,an)))),128))],512),[[t.u1,r.lead.marca_interes]])]),(0,l.Lk)("div",on,[a[26]||(a[26]=(0,l.Lk)("label",{for:"modelo_interesado",class:"form-label fw-bold"},"Modelo Interesado",-1)),(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":a[9]||(a[9]=e=>r.lead.modelo_interesado=e),class:"form-select",required:""},[a[25]||(a[25]=(0,l.Lk)("option",{disabled:"",value:""},"Selecciona un modelo",-1)),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(s.modelosFiltrados,(e=>((0,l.uX)(),(0,l.CE)("option",{key:e,value:e},(0,m.v_)(e),9,tn)))),128))],512),[[t.u1,r.lead.modelo_interesado]])]),(0,l.Lk)("div",ln,[a[29]||(a[29]=(0,l.Lk)("label",{class:"form-label fw-bold"},"Autorización de Tratamiento de Datos y Habeas Data: ",-1)),(0,l.Lk)("div",nn,[(0,l.bo)((0,l.Lk)("input",{type:"checkbox","onUpdate:modelValue":a[10]||(a[10]=e=>r.lead.habeas_data_si=e),id:"habeas_data_si",class:"form-check-input",value:!0,onChange:a[11]||(a[11]=(...e)=>s.actualizarHabeasData&&s.actualizarHabeasData(...e))},null,544),[[t.lH,r.lead.habeas_data_si]]),a[27]||(a[27]=(0,l.Lk)("label",{for:"habeas_data_si",class:"form-check-label"},"Sí",-1))]),(0,l.Lk)("div",rn,[(0,l.bo)((0,l.Lk)("input",{type:"checkbox","onUpdate:modelValue":a[12]||(a[12]=e=>r.lead.habeas_data_no=e),id:"habeas_data_no",class:"form-check-input",value:!0,onChange:a[13]||(a[13]=(...e)=>s.actualizarHabeasData&&s.actualizarHabeasData(...e))},null,544),[[t.lH,r.lead.habeas_data_no]]),a[28]||(a[28]=(0,l.Lk)("label",{for:"habeas_data_no",class:"form-check-label"},"No",-1))]),(0,l.Lk)("small",sn,[(0,l.Lk)("a",{href:s.obtenerEnlaceAutorizacion(),target:"_blank",onClick:a[14]||(a[14]=(...e)=>s.marcarVisitaEnlace&&s.marcarVisitaEnlace(...e))}," Ver términos de autorización ",8,dn)])])]),a[31]||(a[31]=(0,l.Lk)("div",{class:"mensaje-legal mt-3 p-2 border rounded"},[(0,l.Lk)("p",{class:"fw-bold"},"Consideraciones legales:"),(0,l.Lk)("p",null,"1. Este agendamiento de test drive incluye préstamo de un vehículo seleccionado por el cliente en la ciudad de Bogotá, en los concesionarios de Inchcape: Morato, Usaquén, Avda. Chile, Calle 13, Avda Boyacá y Centro Mayor; de acuerdo con el listado de Vehículos disponibles para test drive al momento de hacer el agendamiento en la fecha que el cliente desee hacerlo, previa reservación y cuya duración es de 1 día contado a partir de la firma de un contrato de comodato. Para tal fin debe ser mayor de 18 años, presentar cédula de ciudadanía original, residir en Colombia, pase | licencia de conducción colombiano y vigente; diligenciar, firmar y aceptar el formato de exoneración y formato de check list entrega del vehículo."),(0,l.Lk)("p",null,"2. El cliente deberá aceptar la política y tratamiento de datos y habeas data al momento de diligenciar el formato y no tener restricción de contactabilidad en el RNE (Registo Nacional de Excluidos) de la CRC (Comisión de Regulación de Comunicaciones).")],-1)),(0,l.Lk)("div",cn,[(0,l.Lk)("button",{onClick:a[15]||(a[15]=(...e)=>s.guardarLead&&s.guardarLead(...e)),class:"btn btn-success",disabled:!s.formularioCompleto||r.procesando},[r.procesando?((0,l.uX)(),(0,l.CE)("span",mn,a[30]||(a[30]=[(0,l.Lk)("i",{class:"spinner-border spinner-border-sm"},null,-1),(0,l.eW)(" Guardando... ")]))):((0,l.uX)(),(0,l.CE)("span",hn,"Guardar y Salir"))],8,un)])]))])])}var vn={data(){return{lead:{nombres:"",apellidos:"",identificacion:"",telefono:"",correo:"",ciudad:"",marca_interes:"",habeas_data:"",habeas_data_si:!1,habeas_data_no:!1,aceptacion_tratamiento_datos:"Si",origen_lead:"Canal digital"},marcasDisponibles:["KGM"],modelosPorMarca:{KGM:["TIVOLI","KORANDO","REXTON","REXTON SPORTS","TORRES","TORRES EVX","ACTYON"]},ciudades:["Bogotá y Municipios Cercanos"],mensajeConfirmacion:"",contador:15,enlaceVisitado:!1,procesando:!1,errores:{identificacion:!1,telefono:!1}}},computed:{modelosFiltrados(){return this.lead.marca_interes&&this.modelosPorMarca[this.lead.marca_interes]||[]},formularioCompleto(){return this.lead.nombres&&this.lead.apellidos&&this.lead.identificacion&&this.lead.telefono&&this.lead.correo&&this.lead.ciudad&&this.lead.marca_interes&&this.lead.modelo_interesado&&this.lead.habeas_data_si}},watch:{"lead.marca_interes":function(){this.lead.modelo_interesado=""}},methods:{obtenerEnlaceAutorizacion(){return"Subaru"===this.lead.marca_interes||"Citroen"===this.lead.marca_interes?"https://pracodidacol.com/wp-content/uploads/2020/05/JU-PO-02__POLITICA-INSTITUCIONAL-DE-TRATAMIENTO-Y-USO-DE-DATOS-E-INFORMACION-PERSONAL_1724169415.docx-f-f-f-f.pdf":"Suzuki"===this.lead.marca_interes||"Great Wall"===this.lead.marca_interes?"https://derco.com.co/wp-content/uploads/2024/09/JU-PO-02-POLITICA-INSTITUCIONAL-DE-TRATAMIENTO-Y-USO-DE-DATOS-E-INFORMACION-PERSONAL_1724169415.docx-f-f-f-f.pdf":"#"},marcarVisitaEnlace(){this.enlaceVisitado=!0},validarNumeros(e){this.lead&&this.lead[e]&&(this.lead[e]=this.lead[e].replace(/\D/g,""),this.errores[e]=isNaN(Number(this.lead[e]))||""===this.lead[e].trim())},actualizarHabeasData(){this.lead.habeas_data_si&&this.lead.habeas_data_no&&(this.lead.habeas_data_no=!1),this.lead.habeas_data=this.lead.habeas_data_si?"Si":this.lead.habeas_data_no?"No":""},async guardarLead(){if(!this.formularioCompleto||this.procesando)return void alert("Debe completar todos los campos, aceptar la Autorización de Tratamiento de Datos y Habeas Data y hacer click para visitar su enlace para continuar.");let e=this.lead.ciudad;"Bogotá y Municipios Cercanos"===e&&(e="Bogota");const a={...this.lead,ciudad:e,aceptacion_tratamiento_datos:"Si",habeas_data:this.lead.habeas_data};this.procesando=!0;try{await g.A.post("/add-lead-test-drive",a),this.mensajeConfirmacion="Gracias por registrarte para vivir esta experiencia de Test Drive. Próximamente serás contactado por uno de nuestros consultores.",window.fbq&&fbq("track","CompleteRegistration",{content_name:"Test Drive Registration",status:"successful"}),this.iniciarCuentaRegresiva()}catch(o){console.error("Error al guardar el lead:",o.response||o),alert("Error al guardar el lead. Intente nuevamente.")}finally{this.procesando=!1}},iniciarCuentaRegresiva(){let e=setInterval((()=>{this.contador--,0===this.contador&&(clearInterval(e),window.location.href="about:blank")}),1e3)}}};const Ln=(0,i.A)(vn,[["render",pn],["__scopeId","data-v-29fe9727"]]);var bn=Ln;function kn(e,a,o,t,n,r){const s=(0,l.g2)("DashboardLayout");return(0,l.uX)(),(0,l.Wv)(s,{links:n.navLinks},null,8,["links"])}const fn={class:"d-flex"},gn={class:"bg-dark text-white d-flex flex-column",style:{"min-width":"220px","min-height":"100vh"}},Cn={class:"nav flex-column p-2 flex-grow-1"},En={class:"p-2"},_n={class:"flex-grow-1 p-4",style:{"min-height":"100vh","background-color":"#f8f9fa"}};function yn(e,a,o,t,n,r){const s=(0,l.g2)("router-link"),i=(0,l.g2)("router-view");return(0,l.uX)(),(0,l.CE)("div",fn,[(0,l.Lk)("aside",gn,[a[1]||(a[1]=(0,l.Lk)("div",{class:"p-3 border-bottom"},[(0,l.Lk)("h4",{class:"mb-0"},"LeadMass")],-1)),(0,l.Lk)("nav",Cn,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(o.links,(e=>((0,l.uX)(),(0,l.Wv)(s,{key:e.to,to:e.to,class:"nav-link text-white","active-class":"active"},{default:(0,l.k6)((()=>[(0,l.Lk)("i",{class:(0,m.C4)([e.icon,"me-2"])},null,2),(0,l.Lk)("span",null,(0,m.v_)(e.text),1)])),_:2},1032,["to"])))),128))]),(0,l.Lk)("div",En,[(0,l.Lk)("button",{class:"btn btn-danger w-100",onClick:a[0]||(a[0]=(...e)=>r.logout&&r.logout(...e))},"Salir")])]),(0,l.Lk)("main",_n,[(0,l.bF)(i)])])}var xn={name:"DashboardLayout",props:{links:{type:Array,default:()=>[]}},methods:{logout(){localStorage.clear(),this.$router.push("/")}}};const An=(0,i.A)(xn,[["render",yn],["__scopeId","data-v-223c5acc"]]);var Vn=An,Sn={name:"AdminDashboard",components:{DashboardLayout:Vn},data(){return{navLinks:[{to:"/dashboard/admin/leads",text:"Leads",icon:"fa fa-address-card"},{to:"/dashboard/admin/eliminacion-leads",text:"Gestión y Eliminación",icon:"fa fa-trash"},{to:"/dashboard/admin/reportes",text:"Reportes",icon:"fa fa-chart-bar"},{to:"/dashboard/admin/parametrizacion",text:"Parametrización",icon:"fa fa-cogs"},{to:"/dashboard/admin/estado-vendedores",text:"Estado Vendedores",icon:"fa fa-users"},{to:"/dashboard/admin/log-consultas-rne",text:"Consultas RNE",icon:"fa fa-history"},{to:"/dashboard/admin/logs-auditoria",text:"Logs Auditoría",icon:"fa fa-book"},{to:"/dashboard/admin/parametrizacion-general",text:"Parametrización General",icon:"fa fa-sliders-h"},{to:"/dashboard/admin/usuarios",text:"Usuarios",icon:"fa fa-user-cog"}]}}};const In=(0,i.A)(Sn,[["render",kn]]);var Nn=In;function Fn(e,a,o,t,n,r){const s=(0,l.g2)("DashboardLayout");return(0,l.uX)(),(0,l.Wv)(s,{links:n.navLinks},null,8,["links"])}var Tn={name:"GerenteDashboard",components:{DashboardLayout:Vn},data(){return{navLinks:[{to:"/dashboard/gerente/leads",text:"Leads",icon:"fa fa-address-card"},{to:"/dashboard/gerente/estado-vendedores-supervisor",text:"Estado Vendedores",icon:"fa fa-users"},{to:"/dashboard/gerente/leads-expert",text:"Leads Expertos",icon:"fa fa-user-tie"},{to:"/dashboard/gerente/reportes",text:"Reportes",icon:"fa fa-chart-bar"}]}}};const wn=(0,i.A)(Tn,[["render",Fn]]);var Dn=wn;function Rn(e,a,o,t,n,r){const s=(0,l.g2)("DashboardLayout");return(0,l.uX)(),(0,l.Wv)(s,{links:n.navLinks},null,8,["links"])}var Xn={name:"VendedorDashboard",components:{DashboardLayout:Vn},data(){return{navLinks:[{to:"/dashboard/vendedor/leads",text:"Mis Leads",icon:"fa fa-address-card"}]}}};const Un=(0,i.A)(Xn,[["render",Rn]]);var On=Un;const Mn=[{path:"/",name:"Login",component:_},{path:"/test-drive-form",name:"PublicTestDrive",component:bn},{path:"/dashboard/admin",name:"AdminDashboard",component:Nn,children:[{path:"",redirect:{name:"AdminLeads"}},{path:"leads",name:"AdminLeads",component:()=>o.e(164).then(o.bind(o,6164))},{path:"eliminacion-leads",name:"AdminEliminacionLeads",component:Pe},{path:"reportes",name:"AdminReportes",component:()=>o.e(345).then(o.bind(o,8345))},{path:"parametrizacion",name:"AdminParametrizacion",component:Y},{path:"estado-vendedores",name:"AdminEstadoVendedores",component:Ma},{path:"log-consultas-rne",name:"AdminLogRNE",component:fo},{path:"logs-auditoria",name:"AdminLogsAuditoria",component:yl},{path:"parametrizacion-general",name:"AdminParametrizacionGeneral",component:Ml},{path:"usuarios",name:"AdminUsuarios",component:()=>o.e(465).then(o.bind(o,8465))}]},{path:"/dashboard/gerente",name:"GerenteDashboard",component:Dn,children:[{path:"",redirect:{name:"GerenteLeads"}},{path:"leads",name:"GerenteLeads",component:dt},{path:"estado-vendedores-supervisor",name:"GerenteEstadoVendedores",component:ja},{path:"leads-expert",name:"GerenteLeadsExpert",component:to},{path:"reportes",name:"GerenteReportes",component:()=>o.e(565).then(o.bind(o,7565))}]},{path:"/dashboard/vendedor",name:"VendedorDashboard",component:On,children:[{path:"",redirect:{name:"VendedorLeads"}},{path:"leads",name:"VendedorLeads",component:cl}]},{path:"/expert-dashboard",name:"ExpertDashboard",component:Da},{path:"/:pathMatch(.*)*",redirect:{name:"Login"}}],Pn=(0,u.aE)({history:(0,u.LA)(),routes:Mn});var zn=Pn;const Gn=(0,t.Ef)(c);Gn.use(zn),Gn.mount("#app")},6743:function(e,a,o){o.d(a,{A:function(){return i}});var t=o(6768);function l(e,a,o,l,n,r){return(0,t.uX)(),(0,t.CE)("div",null,[(0,t.Lk)("button",{onClick:a[0]||(a[0]=(...e)=>r.goToMenu&&r.goToMenu(...e))},"Menú Principal"),(0,t.Lk)("button",{onClick:a[1]||(a[1]=(...e)=>r.logout&&r.logout(...e))},"Salir del Programa")])}o(4114);var n={methods:{goToMenu(){const e=localStorage.getItem("tipo_usuario");"administrador"===e?this.$router.push("/menu"):"supervisor"===e?this.$router.push("/menu-supervisor"):"vendedor"===e&&this.$router.push("/menu-vendedor")},logout(){localStorage.removeItem("tipo_usuario"),this.$router.push("/")}}},r=o(1241);const s=(0,r.A)(n,[["render",l],["__scopeId","data-v-08b38d27"]]);var i=s}},a={};function o(t){var l=a[t];if(void 0!==l)return l.exports;var n=a[t]={exports:{}};return e[t].call(n.exports,n,n.exports,o),n.exports}o.m=e,function(){var e=[];o.O=function(a,t,l,n){if(!t){var r=1/0;for(c=0;c<e.length;c++){t=e[c][0],l=e[c][1],n=e[c][2];for(var s=!0,i=0;i<t.length;i++)(!1&n||r>=n)&&Object.keys(o.O).every((function(e){return o.O[e](t[i])}))?t.splice(i--,1):(s=!1,n<r&&(r=n));if(s){e.splice(c--,1);var d=l();void 0!==d&&(a=d)}}return a}n=n||0;for(var c=e.length;c>0&&e[c-1][2]>n;c--)e[c]=e[c-1];e[c]=[t,l,n]}}(),function(){o.n=function(e){var a=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(a,{a:a}),a}}(),function(){o.d=function(e,a){for(var t in a)o.o(a,t)&&!o.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:a[t]})}}(),function(){o.f={},o.e=function(e){return Promise.all(Object.keys(o.f).reduce((function(a,t){return o.f[t](e,a),a}),[]))}}(),function(){o.u=function(e){return"js/"+e+"."+{164:"b019104f",345:"e1a4b6e2",465:"d0fc41c4",565:"90494f3f"}[e]+".js"}}(),function(){o.miniCssF=function(e){return"css/"+e+"."+{164:"8d1e6a96",345:"948e9ec4",465:"d9136f5d",565:"74acd009"}[e]+".css"}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)}}(),function(){var e={},a="frontend:";o.l=function(t,l,n,r){if(e[t])e[t].push(l);else{var s,i;if(void 0!==n)for(var d=document.getElementsByTagName("script"),c=0;c<d.length;c++){var u=d[c];if(u.getAttribute("src")==t||u.getAttribute("data-webpack")==a+n){s=u;break}}s||(i=!0,s=document.createElement("script"),s.charset="utf-8",s.timeout=120,o.nc&&s.setAttribute("nonce",o.nc),s.setAttribute("data-webpack",a+n),s.src=t),e[t]=[l];var m=function(a,o){s.onerror=s.onload=null,clearTimeout(h);var l=e[t];if(delete e[t],s.parentNode&&s.parentNode.removeChild(s),l&&l.forEach((function(e){return e(o)})),a)return a(o)},h=setTimeout(m.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=m.bind(null,s.onerror),s.onload=m.bind(null,s.onload),i&&document.head.appendChild(s)}}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){o.p="/"}(),function(){if("undefined"!==typeof document){var e=function(e,a,t,l,n){var r=document.createElement("link");r.rel="stylesheet",r.type="text/css",o.nc&&(r.nonce=o.nc);var s=function(o){if(r.onerror=r.onload=null,"load"===o.type)l();else{var t=o&&o.type,s=o&&o.target&&o.target.href||a,i=new Error("Loading CSS chunk "+e+" failed.\n("+t+": "+s+")");i.name="ChunkLoadError",i.code="CSS_CHUNK_LOAD_FAILED",i.type=t,i.request=s,r.parentNode&&r.parentNode.removeChild(r),n(i)}};return r.onerror=r.onload=s,r.href=a,t?t.parentNode.insertBefore(r,t.nextSibling):document.head.appendChild(r),r},a=function(e,a){for(var o=document.getElementsByTagName("link"),t=0;t<o.length;t++){var l=o[t],n=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(n===e||n===a))return l}var r=document.getElementsByTagName("style");for(t=0;t<r.length;t++){l=r[t],n=l.getAttribute("data-href");if(n===e||n===a)return l}},t=function(t){return new Promise((function(l,n){var r=o.miniCssF(t),s=o.p+r;if(a(r,s))return l();e(t,s,null,l,n)}))},l={524:0};o.f.miniCss=function(e,a){var o={164:1,345:1,465:1,565:1};l[e]?a.push(l[e]):0!==l[e]&&o[e]&&a.push(l[e]=t(e).then((function(){l[e]=0}),(function(a){throw delete l[e],a})))}}}(),function(){var e={524:0};o.f.j=function(a,t){var l=o.o(e,a)?e[a]:void 0;if(0!==l)if(l)t.push(l[2]);else{var n=new Promise((function(o,t){l=e[a]=[o,t]}));t.push(l[2]=n);var r=o.p+o.u(a),s=new Error,i=function(t){if(o.o(e,a)&&(l=e[a],0!==l&&(e[a]=void 0),l)){var n=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;s.message="Loading chunk "+a+" failed.\n("+n+": "+r+")",s.name="ChunkLoadError",s.type=n,s.request=r,l[1](s)}};o.l(r,i,"chunk-"+a,a)}},o.O.j=function(a){return 0===e[a]};var a=function(a,t){var l,n,r=t[0],s=t[1],i=t[2],d=0;if(r.some((function(a){return 0!==e[a]}))){for(l in s)o.o(s,l)&&(o.m[l]=s[l]);if(i)var c=i(o)}for(a&&a(t);d<r.length;d++)n=r[d],o.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return o.O(c)},t=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];t.forEach(a.bind(null,0)),t.push=a.bind(null,t.push.bind(t))}();var t=o.O(void 0,[504],(function(){return o(2821)}));t=o.O(t)})();
//# sourceMappingURL=app.1c7e0706.js.map